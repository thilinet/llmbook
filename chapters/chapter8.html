
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Chapter 8 - LLM Agents Development Ecosystem &#8212; Learn Large Language Models Fast</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapters/chapter8';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Chapter 7 - Rag based applications" href="chapter9.html" />
    <link rel="prev" title="Chapter 6 - Prompt Engineering" href="chapter6.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/llm_t.png" class="logo__image only-light" alt="Learn Large Language Models Fast - Home"/>
    <script>document.write(`<img src="../_static/llm_t.png" class="logo__image only-dark" alt="Learn Large Language Models Fast - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Learn Large Language Models Fast
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="chapter1/chapter1.html">Chapter 1 - Input to LLMs</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter2/chapter2.html">Chapter 2 - Transformer Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter3/chapter3.html">Chapter 3 - Pre-train a tiny LLM</a></li>

<li class="toctree-l1"><a class="reference internal" href="chapter6.html">Chapter 6 - Prompt Engineering</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Chapter 8 - LLM Agents Development Ecosystem</a></li>


<li class="toctree-l1"><a class="reference internal" href="chapter9.html">Chapter 7 - Rag based applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter10.html">Chapter 10- Artificial General Intelligence</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fchapters/chapter8.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/chapters/chapter8.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Chapter 8 - LLM Agents Development Ecosystem</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Chapter 8 - LLM Agents Development Ecosystem</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ollama">Ollama</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#list-of-available-models">List of available models</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#pull-a-model">Pull a model</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interacting-with-langchain">Interacting with Langchain</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-i-o">Model I/O</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#composition">Composition</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tools">Tools</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#toolkits">Toolkits</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#agents">Agents</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#function-calling">Function Calling</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chroma">Chroma</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#llamaindex">LlamaIndex</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-connector">Data connector</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nodes">Nodes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#natural-language-sql-queries">Natural Language SQL Queries</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="chapter-8-llm-agents-development-ecosystem">
<h1>Chapter 8 - LLM Agents Development Ecosystem<a class="headerlink" href="#chapter-8-llm-agents-development-ecosystem" title="Link to this heading">#</a></h1>
<p>In this chapter we will leverage crewAI and Ollama to demonstrate how to create multiple agents collborating with each other
to perform a given task.</p>
<ul class="simple">
<li><p>ollama</p></li>
<li><p>llamaindex</p></li>
<li><p>langchain</p></li>
<li><p>deeplake</p></li>
<li><p>haystack</p></li>
</ul>
<section id="ollama">
<h2>Ollama<a class="headerlink" href="#ollama" title="Link to this heading">#</a></h2>
<p>Ollama enables us to run open source LLMs locally. A tool that enables local deployment of large language models. A great tool for experimetning with LLMs. No need cloud hosting.
<a class="github reference external" href="http://github.com/ollama/ollama">ollama/ollama</a>. Refer to the website for installation.</p>
<p>Advantages for using Ollama,</p>
<ol class="arabic simple">
<li><p>Quick iteratvie development without needing to deploy model changes</p></li>
<li><p>Privacy and security - data does not leave your machine.</p></li>
<li><p>cost - more cost effective than making API calls.</p></li>
<li><p>control - more control over the model</p></li>
</ol>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>curl  -fsSL https://ollama.com/install.sh | sh

&gt;&gt;&gt; Installing ollama to /usr/local/bin...
&gt;&gt;&gt; Creating ollama user...
&gt;&gt;&gt; Adding ollama user to render group...
&gt;&gt;&gt; Adding ollama user to video group...
&gt;&gt;&gt; Adding current user to ollama group...
&gt;&gt;&gt; Creating ollama systemd service...
&gt;&gt;&gt; Enabling and starting ollama service...
Created symlink /etc/systemd/system/default.target.wants/ollama.service → /etc/systemd/system/ollama.service.
&gt;&gt;&gt; NVIDIA GPU installed.

sudo systemctl status ollama
● ollama.service - Ollama Service
     Loaded: loaded (/etc/systemd/system/ollama.service; enabled; vendor preset: enabled)
     Active: active (running) since Sat 2024-05-11 19:59:42 EDT; 5min ago
   Main PID: 1053781 (ollama)
      Tasks: 18 (limit: 18827)
     Memory: 480.5M
     CGroup: /system.slice/ollama.service
             └─1053781 /usr/local/bin/ollama serve

May 11 19:59:42 gopi-G5-MD ollama[1053781]: Couldn&#39;t find &#39;/usr/share/ollama/.ollama/id_ed25519&#39;. Generating new private key.
May 11 19:59:42 gopi-G5-MD ollama[1053781]: Your new public key is:
May 11 19:59:42 gopi-G5-MD ollama[1053781]: ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPkwrlZDwOjnkF2xAiAWVxs8CrIfsqSnNcs3adQQv9xC
May 11 19:59:42 gopi-G5-MD ollama[1053781]: 2024/05/11 19:59:42 routes.go:1006: INFO server config env=&quot;map[OLLAMA_DEBUG:false OLLAMA_LLM_LIBRARY: OLLAMA_MAX_LOADED_MODELS:1 OLLAMA_MAX_QUEUE:512 OLLAMA_&gt;
May 11 19:59:42 gopi-G5-MD ollama[1053781]: time=2024-05-11T19:59:42.753-04:00 level=INFO source=images.go:704 msg=&quot;total blobs: 0&quot;
May 11 19:59:42 gopi-G5-MD ollama[1053781]: time=2024-05-11T19:59:42.753-04:00 level=INFO source=images.go:711 msg=&quot;total unused blobs removed: 0&quot;
May 11 19:59:42 gopi-G5-MD ollama[1053781]: time=2024-05-11T19:59:42.753-04:00 level=INFO source=routes.go:1052 msg=&quot;Listening on 127.0.0.1:11434 (version 0.1.36)&quot;
May 11 19:59:42 gopi-G5-MD ollama[1053781]: time=2024-05-11T19:59:42.753-04:00 level=INFO source=payload.go:30 msg=&quot;extracting embedded files&quot; dir=/tmp/ollama769771873/runners
May 11 19:59:44 gopi-G5-MD ollama[1053781]: time=2024-05-11T19:59:44.699-04:00 level=INFO source=payload.go:44 msg=&quot;Dynamic LLM libraries [cpu cpu_avx cpu_avx2 cuda_v11 rocm_v60002]&quot;
May 11 19:59:45 gopi-G5-MD ollama[1053781]: time=2024-05-11T19:59:45.929-04:00 level=INFO source=types.go:71 msg=&quot;inference compute&quot; id=0 library=cpu compute=&quot;&quot; driver=0.0 name=&quot;&quot; total=&quot;15.4 GiB&quot; avail&gt;
lines 1-19/19 (END)
</pre></div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="list-of-available-models">
<h1>List of available models<a class="headerlink" href="#list-of-available-models" title="Link to this heading">#</a></h1>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ollama list
NAME	ID	SIZE	MODIFIED 
</pre></div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="pull-a-model">
<h1>Pull a model<a class="headerlink" href="#pull-a-model" title="Link to this heading">#</a></h1>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> ollama pull phi3
pulling manifest 
pulling 4fed7364ee3e... 100% ▕███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████▏ 2.3 GB                         
pulling c608dc615584... 100% ▕███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████▏  149 B                         
pulling fa8235e5b48f... 100% ▕███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████▏ 1.1 KB                         
pulling d47ab88b61ba... 100% ▕███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████▏  140 B                         
pulling f7eda1da5a81... 100% ▕███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████▏  485 B                         
verifying sha256 digest 
writing manifest 
removing any unused layers 
success 


(base) gopi@gopi-G5-MD:~/Documents/small_llm$ ollama list
NAME       	ID          	SIZE  	MODIFIED       
phi3:latest	a2c89ceaed85	2.3 GB	19 seconds ago	
</pre></div>
</div>
<p>Now listing the model shows phi3 model. The models are stored as blob in /usr/share/ollama/.ollama</p>
<p>Ollama bundles the model into a single package defined by a Modelfile. Let us see the modelfile for phi3.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; /show modelfile
# Modelfile generate by &quot;ollama show&quot;
# To build a new Modelfile based on this, replace FROM with:
# FROM phi3:latest

FROM /usr/share/ollama/.ollama/models/blobs/sha256-4fed7364ee3e0c7cb4fe0880148bfdfcd1b630981efa0802a6b62ee52e7da97e
TEMPLATE &quot;{{ if .System }}&lt;|system|&gt;
{{ .System }}&lt;|end|&gt;
{{ end }}{{ if .Prompt }}&lt;|user|&gt;
{{ .Prompt }}&lt;|end|&gt;
{{ end }}&lt;|assistant|&gt;
{{ .Response }}&lt;|end|&gt;
&quot;
PARAMETER stop &lt;|user|&gt;
PARAMETER stop &lt;|assistant|&gt;
PARAMETER stop &lt;|system|&gt;
PARAMETER stop &lt;|end|&gt;
PARAMETER stop &lt;|endoftext|&gt;
PARAMETER num_keep 4
LICENSE &quot;&quot;&quot;Microsoft.
Copyright (c) Microsoft Corporation.

MIT License

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &quot;Software&quot;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.&quot;&quot;&quot;
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Interacting with LLM</span>

    <span class="n">ollama</span> <span class="n">run</span> <span class="n">phi3</span><span class="p">:</span><span class="n">latest</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="n">Why</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">sky</span> <span class="n">blue</span> <span class="ow">in</span> color<span class="o">?</span>
     <span class="n">The</span> <span class="n">sky</span> <span class="n">appears</span> <span class="n">blue</span> <span class="n">to</span> <span class="n">our</span> <span class="n">eyes</span> <span class="n">because</span> <span class="n">of</span> <span class="n">a</span> <span class="n">phenomenon</span> <span class="n">called</span> <span class="n">Rayleigh</span> <span class="n">scattering</span><span class="o">.</span> <span class="n">As</span> <span class="n">sunlight</span> <span class="n">travels</span> <span class="n">through</span> <span class="n">Earth</span><span class="s1">&#39;s atmosphere, it encounters molecules and small particles that are much </span>
    <span class="n">smaller</span> <span class="n">than</span> <span class="n">its</span> <span class="n">wavelength</span><span class="o">.</span> <span class="n">These</span> <span class="n">particles</span> <span class="n">scatter</span> <span class="n">shorter</span><span class="o">-</span><span class="n">wavelength</span> <span class="n">light</span> <span class="p">(</span><span class="n">blue</span> <span class="ow">and</span> <span class="n">violet</span><span class="p">)</span> <span class="n">more</span> <span class="n">effectively</span> <span class="n">than</span> <span class="n">longer</span><span class="o">-</span><span class="n">wavelength</span> <span class="n">light</span> <span class="p">(</span><span class="n">red</span><span class="p">,</span> <span class="n">orange</span><span class="p">)</span><span class="o">.</span>
    
    <span class="n">However</span><span class="p">,</span> <span class="n">our</span> <span class="n">eyes</span> <span class="n">are</span> <span class="n">less</span> <span class="n">sensitive</span> <span class="n">to</span> <span class="n">violet</span> <span class="n">light</span><span class="p">,</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">Sun</span> <span class="n">emits</span> <span class="n">less</span> <span class="n">violet</span> <span class="n">light</span> <span class="n">compared</span> <span class="n">to</span> <span class="n">blue</span> <span class="n">light</span><span class="p">;</span> <span class="n">that</span><span class="s1">&#39;s why we see a predominantly blue sky during daytime. At sunrise or sunset, </span>
    <span class="n">when</span> <span class="n">the</span> <span class="n">light</span> <span class="n">path</span> <span class="n">through</span> <span class="n">the</span> <span class="n">atmosphere</span> <span class="ow">is</span> <span class="n">longer</span><span class="p">,</span> <span class="n">even</span> <span class="n">more</span> <span class="n">scattering</span> <span class="n">of</span> <span class="n">red</span> <span class="ow">and</span> <span class="n">orange</span> <span class="n">wavelengths</span> <span class="n">occurs</span><span class="p">,</span> <span class="n">which</span> <span class="n">makes</span> <span class="n">the</span> <span class="n">sky</span> <span class="n">appear</span> <span class="ow">in</span> <span class="n">shades</span> <span class="n">of</span> <span class="n">red</span><span class="p">,</span> <span class="n">pink</span><span class="p">,</span> <span class="ow">and</span> <span class="n">orange</span><span class="o">.</span>
    
    <span class="n">The</span> <span class="n">overall</span> <span class="n">color</span> <span class="n">perception</span> <span class="n">can</span> <span class="n">also</span> <span class="n">be</span> <span class="n">affected</span> <span class="n">by</span> <span class="n">atmospheric</span> <span class="n">conditions</span> <span class="n">such</span> <span class="k">as</span> <span class="n">pollution</span> <span class="ow">or</span> <span class="n">dust</span> <span class="n">particles</span><span class="o">.</span> <span class="n">But</span> <span class="n">under</span> <span class="n">normal</span> <span class="n">circumstances</span> <span class="n">on</span> <span class="n">a</span> <span class="n">clear</span> <span class="n">day</span><span class="p">,</span> <span class="n">Rayleigh</span> <span class="n">scattering</span> <span class="ow">is</span> <span class="n">responsible</span> 
    <span class="k">for</span> <span class="n">the</span> <span class="n">blue</span> <span class="n">coloration</span> <span class="n">of</span> <span class="n">our</span> <span class="n">sky</span><span class="o">.</span>
    
    <span class="o">&gt;&gt;&gt;</span> <span class="n">Send</span> <span class="n">a</span> <span class="n">message</span> <span class="p">(</span><span class="o">/</span><span class="err">?</span> <span class="k">for</span> <span class="n">help</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span>  <span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
    <span class="n">ollama</span> <span class="n">run</span> <span class="n">phi3</span><span class="p">:</span><span class="n">latest</span>
    <span class="o">^</span>
<span class="ne">IndentationError</span>: unexpected indent
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Prompt template</span>
</pre></div>
</div>
</div>
</div>
<section id="interacting-with-langchain">
<h2>Interacting with Langchain<a class="headerlink" href="#interacting-with-langchain" title="Link to this heading">#</a></h2>
<figure class="align-default">
<a class="reference internal image-reference" href="images/chapter5/LangChain.png"><img alt="images/chapter5/LangChain.png" src="images/chapter5/LangChain.png" style="height: 200px;" /></a>
</figure>
</section>
<section id="model-i-o">
<h2>Model I/O<a class="headerlink" href="#model-i-o" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">langchain_community.llms</span> <span class="kn">import</span> <span class="n">Ollama</span>
<span class="kn">from</span> <span class="nn">langchain_community.chat_models</span> <span class="kn">import</span> <span class="n">ChatOllama</span>

<span class="n">MODEL</span> <span class="o">=</span> <span class="s2">&quot;phi3:latest&quot;</span>

<span class="n">llm</span> <span class="o">=</span> <span class="n">Ollama</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">MODEL</span><span class="p">)</span>
<span class="n">chat_model</span> <span class="o">=</span> <span class="n">ChatOllama</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">MODEL</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">out</span> <span class="o">=</span> <span class="n">llm</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="s2">&quot;Explain anitbiotics&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Antibiotics are powerful medicines that fight bacterial infections. They work by either killing the bacteria or slowing down their growth, helping your immune system to eliminate the infection more effectively. Antibiotics do not help against viral infections such as colds and flu.

Here&#39;s a brief overview of how antibiotics work:

1. **Target Bacterial Cells**: Antibiotics are designed to target specific structures or processes within bacteria, which human cells do not possess. This selectivity helps minimize harm to the host organism while effectively attacking the pathogens.
   
2. **Killing/Inhibiting Growth**: There are two main types of antibiotics – Bactericidal (kills bacteria) and Bacteriostatic (inhibits growth). Bactericidal antibiotics, like penicillin, directly destroy bacterial cells. Bacteriostatic antibiotics, such as tetracycline, inhibit the ability of bacteria to grow or reproduce.
   
3. **Different Modes of Action**: Antibiotics can work through various mechanisms, including:
   * Inhibiting cell wall synthesis (e.g., beta-lactams such as penicillin and cephalosporins).
   * Disrupting bacterial protein synthesis (e.g., tetracyclines and aminoglycosides).
   * Interfering with nucleic acid synthesis (e.g., fluoroquinolones affect DNA replication, and rifampin inhibits RNA transcription).
   
4. **Antibiotic Spectrum**: Antibiotics can be broad-spectrum or narrow-spectrum:
   * Broad-spectrum antibiotics are effective against a wide range of bacteria, including both gram-positive and gram-negative species. They&#39;re often used when the causative agent is unknown (empirical therapy). However, their misuse can lead to increased antibiotic resistance.
   * Narrow-spectrum antibiotics target a specific group of bacteria. These are typically preferred because they cause less disruption to the body&#39;s normal flora and have lower chances of causing resistance.
   
5. **Antibiotic Resistance**: One of the major challenges with antibiotics is the development of resistant strains of bacteria. This can happen due to genetic mutations or by acquiring resistance-conferring genes from other bacteria (horizontal gene transfer). Antibiotic misuse and overuse contribute significantly to this problem, leading to multi-drug resistant organisms (MDROs) that are difficult to treat.
   
6. **Appropriate Use**: To preserve the effectiveness of antibiotics and combat resistance, it&#39;s essential for healthcare providers and patients alike to use them judiciously:
   * Prescribers should only prescribe antibiotics when they are necessary (bacterial infections) and choose the most appropriate drug based on an accurate diagnosis.
   * Patients must take medications exactly as directed, complete the full course even if symptoms improve, avoid sharing medication with others, and never use leftover antibiotics for self-treatment or other family members.
   
In summary, antibiotics are crucial tools in modern medicine that help treat bacterial infections effectively. However, their misuse can lead to significant challenges such as the emergence of resistant strains. Thus, responsible usage is vital for maintaining their effectiveness and public health.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">out</span> <span class="o">=</span> <span class="n">llm</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="s2">&quot;Explain anitbiotics A:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Antibiotics are powerful medications that fight bacterial infections by either killing the bacteria or inhibiting their growth. They work through various mechanisms, and here&#39;s a basic overview of antibiotics:

1. Classes of Antibiotics: There are several classes of antibiotics, each with unique properties and functions. Some common classes include:
   - Penicillins (e.g., amoxicillin): Inhibit bacterial cell wall synthesis; first-line treatment for various infections.
   - Cephalosporins (e.g., ceftriaxone): Similar to penicillins, but with broader coverage against resistant bacteria.
   - Macrolides (e.g., azithromycin and erythromycin): Inhibit protein synthesis by binding to the 50S ribosomal subunit in bacteria; used for respiratory, skin, or sexually transmitted infections.
   - Tetracyclines (e.g., doxycycline and minocycline): Also target protein synthesis by binding to the 30S ribosomal subunit, commonly prescribed for a wide range of bacterial infections.
   - Aminoglycosides (e.g., gentamicin, tobramycin): Inhibit bacterial protein synthesis; used for severe or resistant gram-negative infections.
   - Fluoroquinolones (e.g., ciprofloxacin and levofloxacin): Disrupt bacterial DNA replication by targeting enzymes involved in this process, often prescribed for serious bacterial infections.
   - Glycopeptides (e.g., vancomycin): Inhibit cell wall synthesis but are typically used against resistant gram-positive bacteria like MRSA.
   - Sulfonamides: Interfere with folic acid production, essential for DNA and RNA synthesis; broad-spectrum antibiotics, although less commonly prescribed nowadayer due to resistance issues.

2. Mechanisms of Action: Antibiotics can work by various mechanisms, such as inhibiting bacterial cell wall synthesis, disrupting protein or DNA production, interfering with essential metabolic processes, or damaging the outer membrane of bacteria.

3. Proper Use and Resistance: Overuse and misuse of antibiotics have led to increasing rates of resistance among bacterial strains. This makes it crucial for healthcare providers to prescribe antibiotics only when necessary, select the appropriate drug, dose, and duration, while patients must complete their full course as directed by a medical professional.

4. Side Effects: Antibiotics can cause side effects ranging from mild (e.g., nausea, diarrhea) to severe (e.g., allergic reactions or Clostridium difficile infection). It is essential for patients and healthcare providers to weigh the benefits of antibiotic treatment against possible risks before initiating therapy.

In conclusion, antibiotics are vital tools in combatting bacterial infections. However, their appropriate use and careful consideration of resistance patterns should always be emphasized to ensure effectiveness and safeguard public health.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">query</span> <span class="o">=</span> <span class="n">out</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2"> summarize it in five sentences.&quot;</span>
<span class="n">out</span> <span class="o">=</span> <span class="n">llm</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Antibiotics are medications used to treat bacterial infections by either killing the bacteria or hindering their growth, with various classes targeting different aspects of bacterial cellular functions. These classes include penicillins, cephalosporins, macrolides, tetracyclines, aminoglycosides, fluoroquinolones, glycopeptides, and sulfonamides, each with specific mechanisms of action such as inhibiting cell wall synthesis or disrupting protein production. It&#39;s crucial to use antibiotics judiciously due to the rise of bacterial resistance, necessitating appropriate prescription selection and adherence to dosage guidelines by healthcare professionals. Patients must also complete their antibiotic course as directed to minimize side effects like nausea or severe allergic reactions while avoiding conditions such as Clostridium difficile infection. Balancing the therapeutic benefits of antibiotics against potential risks is essential for effective treatment and preserving public health.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">langchain_core.output_parsers</span> <span class="kn">import</span> <span class="n">StrOutputParser</span>
<span class="kn">from</span> <span class="nn">langchain_core.prompts</span> <span class="kn">import</span> <span class="n">PromptTemplate</span>

<span class="n">prompt_template</span> <span class="o">=</span> <span class="n">PromptTemplate</span><span class="o">.</span><span class="n">from_template</span><span class="p">(</span><span class="s2">&quot;what would be a </span><span class="si">{adjective}</span><span class="s2"> company name for a sells </span><span class="si">{product}</span><span class="s2">?&quot;</span><span class="p">)</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="n">prompt_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">adjective</span><span class="o">=</span><span class="s2">&quot;good&quot;</span><span class="p">,</span> <span class="n">product</span><span class="o">=</span><span class="s2">&quot;computer vision analytics&quot;</span><span class="p">)</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">StrOutputParser</span><span class="p">()</span>
<span class="n">chain</span> <span class="o">=</span> <span class="n">prompt</span> <span class="o">|</span> <span class="n">llm</span> <span class="o">|</span> <span class="n">paraser</span>
<span class="n">chain</span><span class="o">.</span><span class="n">invoke</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">52</span><span class="p">],</span> <span class="n">line</span> <span class="mi">7</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="n">prompt</span> <span class="o">=</span> <span class="n">prompt_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">adjective</span><span class="o">=</span><span class="s2">&quot;good&quot;</span><span class="p">,</span> <span class="n">product</span><span class="o">=</span><span class="s2">&quot;computer vision analytics&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="n">parser</span> <span class="o">=</span> <span class="n">StrOutputParser</span><span class="p">()</span>
<span class="ne">----&gt; </span><span class="mi">7</span> <span class="n">chain</span> <span class="o">=</span> <span class="n">prompt</span> <span class="o">|</span> <span class="n">llm</span> <span class="o">|</span> <span class="n">paraser</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span> <span class="n">chain</span><span class="o">.</span><span class="n">invoke</span><span class="p">()</span>

<span class="nn">File ~/miniconda3/lib/python3.12/site-packages/langchain_core/runnables/base.py:433,</span> in <span class="ni">Runnable.__ror__</span><span class="nt">(self, other)</span>
<span class="g g-Whitespace">    </span><span class="mi">423</span> <span class="k">def</span> <span class="fm">__ror__</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">424</span>     <span class="bp">self</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">425</span>     <span class="n">other</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">430</span>     <span class="p">],</span>
<span class="g g-Whitespace">    </span><span class="mi">431</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunnableSerializable</span><span class="p">[</span><span class="n">Other</span><span class="p">,</span> <span class="n">Output</span><span class="p">]:</span>
<span class="g g-Whitespace">    </span><span class="mi">432</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;Compose this runnable with another object to create a RunnableSequence.&quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">433</span>     <span class="k">return</span> <span class="n">RunnableSequence</span><span class="p">(</span><span class="n">coerce_to_runnable</span><span class="p">(</span><span class="n">other</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>

<span class="nn">File ~/miniconda3/lib/python3.12/site-packages/langchain_core/runnables/base.py:4396,</span> in <span class="ni">coerce_to_runnable</span><span class="nt">(thing)</span>
<span class="g g-Whitespace">   </span><span class="mi">4394</span>     <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">Runnable</span><span class="p">[</span><span class="n">Input</span><span class="p">,</span> <span class="n">Output</span><span class="p">],</span> <span class="n">RunnableParallel</span><span class="p">(</span><span class="n">thing</span><span class="p">))</span>
<span class="g g-Whitespace">   </span><span class="mi">4395</span> <span class="k">else</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">4396</span>     <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">4397</span>         <span class="sa">f</span><span class="s2">&quot;Expected a Runnable, callable or dict.&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">4398</span>         <span class="sa">f</span><span class="s2">&quot;Instead got an unsupported type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">thing</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">4399</span>     <span class="p">)</span>

<span class="ne">TypeError</span>: Expected a Runnable, callable or dict.Instead got an unsupported type: &lt;class &#39;str&#39;&gt;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">langchain_core.messages</span> <span class="kn">import</span> <span class="n">HumanMessage</span>

<span class="n">messages</span> <span class="o">=</span> <span class="p">[</span><span class="n">HumanMessage</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">text</span><span class="p">)]</span>
<span class="n">chat_model</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>AIMessage(content=&quot;1. VisionAnalytica: A blend of &#39;vision&#39; and &#39;analytics,&#39; suggesting expertise in using computer vision to analyze data effectively.\n\n2. InsightVista: Combining the idea of insight (understanding) with a vista (view), indicating an expansive approach to insights through computer vision analytics.\n\n3. PixelPulse Analytics: Merging &#39;pixel&#39; from image processing and &#39;pulse&#39; to indicate action-oriented, real-time data analysis using computer vision technology.\n\n4. EyeDataTech: Playing on the idea of focusing (&#39;eye&#39;) on data through cutting-edge technology (tech).\n\n5. DeepVision Analytics: A nod to deep learning and neural networks used in computer vision, combined with &#39;analytics&#39; for their role in interpreting complex visual data.\n\n6. OptiFrame Insights: Fusing the concepts of optimization (&#39;opti&#39;) and structural elements (&#39;frame&#39;), implying precision-driven insights from frame-by-frame analysis.\nean to convey a blend of technological innovation and insightful analytics in computer vision applications.&quot;, response_metadata={&#39;model&#39;: &#39;phi3:latest&#39;, &#39;created_at&#39;: &#39;2024-05-15T17:25:16.794696051Z&#39;, &#39;message&#39;: {&#39;role&#39;: &#39;assistant&#39;, &#39;content&#39;: &#39;&#39;}, &#39;done_reason&#39;: &#39;stop&#39;, &#39;done&#39;: True, &#39;total_duration&#39;: 19821288256, &#39;load_duration&#39;: 1813820899, &#39;prompt_eval_count&#39;: 23, &#39;prompt_eval_duration&#39;: 623426000, &#39;eval_count&#39;: 253, &#39;eval_duration&#39;: 17292362000})
</pre></div>
</div>
</div>
</div>
</section>
<section id="composition">
<h2>Composition<a class="headerlink" href="#composition" title="Link to this heading">#</a></h2>
<section id="tools">
<h3>Tools<a class="headerlink" href="#tools" title="Link to this heading">#</a></h3>
<p>Provide an interface for LLMs and otehr components to interact with other sytems.</p>
<ol class="arabic simple">
<li><p>Name of the tool</p></li>
<li><p>a description of what the tool is</p></li>
<li><p>JSON schema of what the inputs to the tool are</p></li>
<li><p>The function to call</p></li>
<li><p>whether the result of a tool should be returned directly to the user.</p></li>
</ol>
<p>name, description and json schema can be used to prompt the LLM. Based on this the LLM decides what action to take. The function calling can perform the action.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Built in tool example</span>
<span class="c1"># pre-reqs</span>
<span class="c1">#      pip3 install wikipedia</span>


<span class="kn">from</span> <span class="nn">langchain_community.tools</span> <span class="kn">import</span> <span class="n">WikipediaQueryRun</span>
<span class="kn">from</span> <span class="nn">langchain_community.utilities</span> <span class="kn">import</span> <span class="n">WikipediaAPIWrapper</span>

<span class="n">api_wrapper</span> <span class="o">=</span> <span class="n">WikipediaAPIWrapper</span><span class="p">(</span><span class="n">top_k_results</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">doc_content_chars_max</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">tool</span> <span class="o">=</span> <span class="n">WikipediaQueryRun</span><span class="p">(</span><span class="n">api_wrapper</span><span class="o">=</span><span class="n">api_wrapper</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;name: </span><span class="si">{</span><span class="n">tool</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;desc: </span><span class="si">{</span><span class="n">tool</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;args: </span><span class="si">{</span><span class="n">tool</span><span class="o">.</span><span class="n">args</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>name: wikipedia
desc: A wrapper around Wikipedia. Useful for when you need to answer general questions about people, places, companies, facts, historical events, or other subjects. Input should be a search query.
args: {&#39;query&#39;: {&#39;title&#39;: &#39;Query&#39;, &#39;type&#39;: &#39;string&#39;}}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;langchain&quot;</span><span class="p">}</span>
<span class="n">tool</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Page: LangChain\nSummary: LangChain is a framework designed to simplify the creation of applications &#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Built in tools</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">langchain.tools</span> <span class="kn">import</span> <span class="n">DuckDuckGoSearchRun</span><span class="p">,</span> <span class="n">DuckDuckGoSearchResults</span>

<span class="n">search_tool</span> <span class="o">=</span> <span class="n">DuckDuckGoSearchResults</span><span class="p">()</span>
<span class="n">search_tool</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;langchain builtin tools&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;[snippet: from langchain.tools import tool @tool def add(a: int, b: int) -&gt; int: &quot;&quot;&quot;Adds two numbers together&quot;&quot;&quot; # this docstring gets used as the description return a + b # the actions our tool performs. Much simpler right. Behind the scenes, the decorator magically uses the method provided to extend the BaseTool class, just as we did earlier., title: Building a simple Agent with Tools and Toolkits in LangChain, link: https://towardsdatascience.com/building-a-simple-agent-with-tools-and-toolkits-in-langchain-77e0f9bd1fa5], [snippet: To understand how LangChain agents work, let\&#39;s first create a custom agent. In a later section, we\&#39;ll will explain how you can use built-in LangChain agents. Creating Tools. LangChain agents use tools to interact with third-party applications. Depending on the User prompt, an agent can use one or multiple tools to perform a task., title: Introduction to Custom and Built-in Python LangChain Agents, link: https://wellsr.com/python/working-with-python-langchain-agents/], [snippet: Define tools We first need to create the tools we want to use. We will use two tools: Tavily (to search online) and then a retriever over a local index we will create. Tavily We have a built-in tool in LangChain to easily use Tavily search engine as tool. Note that this requires an API key - they have a free tier, but if you don\&#39;t have one or don\&#39;t want to create one, you can always ignore ..., title: How to Use LangChain Agents for Powerful Automated Tasks, link: https://cheatsheet.md/langchain-tutorials/langchain-agents.en], [snippet: LangChain is a model-agnostic, open-source project that helps AI developers integrate large language models with various external data sources. LangChain\&#39;s design caters to an array of applications, from simple question-answering services to complex virtual agents capable of executing specific tasks based on user input., title: What Is Langchain: A Tutorial | Built In, link: https://builtin.com/articles/langchain]&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="toolkits">
<h3>Toolkits<a class="headerlink" href="#toolkits" title="Link to this heading">#</a></h3>
<p>a collection of tools that are designed to be used together for specific tasks. They have convenient loading methods.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Retrievers</span>

<span class="n">A</span> <span class="n">retriever</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">interface</span> <span class="n">that</span> <span class="n">returns</span> <span class="n">documents</span> <span class="n">given</span> <span class="n">an</span> <span class="n">unstructured</span> <span class="n">query</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">langchain_community.vectorstores</span> <span class="kn">import</span> <span class="n">Chroma</span>
<span class="kn">from</span> <span class="nn">langchain_community.document_loaders</span> <span class="kn">import</span> <span class="n">WebBaseLoader</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">langchain.retrievers.web_research</span> <span class="kn">import</span> <span class="n">WebResearchRetriever</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">langchain_community.llms</span> <span class="kn">import</span> <span class="n">Ollama</span>

<span class="n">llm</span> <span class="o">=</span> <span class="n">Ollama</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemma:2b-instruct&quot;</span><span class="p">)</span>

<span class="n">llm</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="s2">&quot;Tell me a joke&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Why did the math book look so sad?\n\nBecause of all of its problems!&#39;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="agents">
<h2>Agents<a class="headerlink" href="#agents" title="Link to this heading">#</a></h2>
<Need to rewrite this one>
Of course, many studies show that they have a generalization ability, where they might work well even on questions or tasks that don’t appear in training data. However, even if you have a really well-trained, the model itself is limited by their training data. What I mean is that you can not provide enough knowledge for them in some cases. The recent LLMs can do math pretty well, but they are not built for calculating tasks. Therefore, they will struggle with complex math equations.
<p>Another example is the limitation of common knowledge. You take years for collecting data to train an LLM. But if you ask your LLM about the result of the game between Arsenal and Brighton yesterday, they just simply can’t answer correctly. The model can’t access the internet to find out, and the training data doesn’t have that information. That’s the reason we should connect LLMs with other tools to expand their power. And the agent is the one we want.</p>
<p>An agent is a program that can “think” and interact with “the world”. Given a task, it will think about how to solve it, make a plan, do some actions to the environment, receive feedback, and repeat these steps until the task is done. For example, we can see a cleaning robot as an agent. We assign it the task of cleaning the bedroom. The robot received the requirement from the human. Then, it starts to think and make a plan for cleaning. It does some actions: go to the bedroom, start to collect garbage, etc. The sensors may help it to check its location, and avoid hitting stuff. The cleaning robot can interact with and receive feedback from the environment.</p>
<p>An LLM agent is also the same. In this case, we exploit the LLM to help the agent can “think” since LLMs are quite good at reasoning tasks. To interact with “the world”, we add some tools that can act and receive results from “the world”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">llm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Ollama(model=&#39;gemma:2b&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">langchain_core.tools</span> <span class="kn">import</span> <span class="n">tool</span>


<span class="nd">@tool</span>
<span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">first_int</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">second_int</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Multiply two integers together.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">first_int</span> <span class="o">*</span> <span class="n">second_int</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">llm_with_tools</span> <span class="o">=</span> <span class="n">llm</span><span class="o">.</span><span class="n">bind_tools</span><span class="p">([</span><span class="n">multiply</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">llm_with_tools</span> <span class="o">=</span> <span class="n">llm</span><span class="o">.</span><span class="n">bind_tools</span><span class="p">([</span><span class="n">multiply</span><span class="p">])</span>

<span class="ne">AttributeError</span>: &#39;Ollama&#39; object has no attribute &#39;bind_tools&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">medium</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">data</span><span class="o">-</span><span class="n">science</span><span class="o">-</span><span class="n">at</span><span class="o">-</span><span class="n">microsoft</span><span class="o">/</span><span class="n">harnessing</span><span class="o">-</span><span class="n">the</span><span class="o">-</span><span class="n">power</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">large</span><span class="o">-</span><span class="n">language</span><span class="o">-</span><span class="n">models</span><span class="o">-</span><span class="n">a</span><span class="o">-</span><span class="n">comparative</span><span class="o">-</span><span class="n">overview</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">langchain</span><span class="o">-</span><span class="n">semantic</span><span class="o">-</span><span class="n">c21f5c19f93e</span>

<span class="n">Difference</span> <span class="n">between</span> <span class="n">semantic</span> <span class="n">kernel</span><span class="p">,</span> <span class="n">autogen</span><span class="p">,</span> <span class="n">langchain</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
<section id="function-calling">
<h3>Function Calling<a class="headerlink" href="#function-calling" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">langchain_experimental.llms.ollama_functions</span> <span class="kn">import</span> <span class="n">OllamaFunctions</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="kn">from</span> <span class="nn">langchain_experimental.llms.ollama_functions</span> <span class="kn">import</span> <span class="n">OllamaFunctions</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;langchain_experimental&#39;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="chroma">
<h2>Chroma<a class="headerlink" href="#chroma" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">chromadb</span>

<span class="n">chroma_client</span> <span class="o">=</span> <span class="n">chromadb</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
<span class="n">collections</span> <span class="o">=</span> <span class="n">chroma_client</span><span class="o">.</span><span class="n">create_collection</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_collection&quot;</span><span class="p">)</span>

<span class="n">collections</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="n">documents</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;This is a document about pineapple&quot;</span>
       <span class="p">,</span><span class="s2">&quot;This is a document about oranges&quot;</span>
    <span class="p">],</span>
    <span class="n">ids</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;id1&quot;</span><span class="p">,</span><span class="s2">&quot;id2&quot;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/gopi/.cache/chroma/onnx_models/all-MiniLM-L6-v2/onnx.tar.gz: 100%|█████████████████████████████████████████████████████████████████████████████████████████████| 79.3M/79.3M [00:10&lt;00:00, 7.75MiB/s]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
    <span class="n">query_texts</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;This is a query document about hawaii&quot;</span><span class="p">],</span>
    <span class="n">n_results</span><span class="o">=</span><span class="mi">2</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;ids&#39;: [[&#39;id1&#39;, &#39;id2&#39;]], &#39;distances&#39;: [[1.0404009819030762, 1.2430799007415771]], &#39;metadatas&#39;: [[None, None]], &#39;embeddings&#39;: None, &#39;documents&#39;: [[&#39;This is a document about pineapple&#39;, &#39;This is a document about oranges&#39;]], &#39;uris&#39;: None, &#39;data&#39;: None}
</pre></div>
</div>
</div>
</div>
</section>
<section id="llamaindex">
<h2>LlamaIndex<a class="headerlink" href="#llamaindex" title="Link to this heading">#</a></h2>
<p>When you single out an LLM for your usecase, you understand the though the LLM is pretrained on a large amount of publicly available dataset, it still has no clue about your domain/use case. You need to make your data available to the LLM for it to perform meaningfully. Context Augmentation is the name of the technique with which you provide your data to the LLM for it to perform inference for your use case.</p>
<p>Llamaindex provides a framework for context augmentation. It provides the following tools to make your data augmentation task easier,</p>
<ol class="arabic simple">
<li><p>Data connectors to ingest data from a variety of sources including pdf, APIs, SQL and many others.</p></li>
<li><p>Data indexes to structure the ingested data in a vector format.</p></li>
<li><p>Natural language access to our data through Engines.</p></li>
<li><p>Knowledge works in the form of Agents</p></li>
<li><p>Tools to perform experiments to enable observability and evaluation of your application performance.</p></li>
</ol>
<p>Llamaindex started with a framework for connecting to different datasources, but now have evolved into a complete ecosystem for building RAG based agents and other LLM based applications.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>ls<span class="w"> </span>../data/chapter7
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>old-man-and-the-sea.txt
</pre></div>
</div>
</div>
</div>
<section id="data-connector">
<h3>Data connector<a class="headerlink" href="#data-connector" title="Link to this heading">#</a></h3>
<p>The class Readers implements the data connectors.The open source project LlamaHub hosts different types of data connectors to support multiple dataformats.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">urllib.request</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="n">url</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/Zhenye-Na/data-structures-uiuc/&quot;</span>
       <span class="s2">&quot;master/lab_huffman/data/old-man-and-the-sea.txt&quot;</span>
      <span class="p">)</span>
<span class="n">filename</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="n">parent</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span>
<span class="n">path</span>   <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;data/chapter7/&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

<span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(PosixPath(&#39;/home/gopi/Documents/small_llm/llmbook/data/chapter7/old-man-and-the-sea.txt&#39;),
 &lt;http.client.HTTPMessage at 0x75fdeb50a1d0&gt;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">llama_index.core</span> <span class="kn">import</span> <span class="n">SimpleDirectoryReader</span>

<span class="n">oldmansea</span> <span class="o">=</span> <span class="n">SimpleDirectoryReader</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">absolute</span><span class="p">())</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">document</span> <span class="ow">in</span> <span class="n">oldmansea</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Document id:</span><span class="se">\n</span><span class="s2"> </span><span class="si">{</span><span class="n">document</span><span class="o">.</span><span class="n">doc_id</span><span class="si">}</span><span class="s2"> </span><span class="se">\n\n</span><span class="s2"> metadata:</span><span class="se">\n</span><span class="s2"> </span><span class="si">{</span><span class="n">document</span><span class="o">.</span><span class="n">metadata</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Document id:
 b62f21f0-b657-4559-b47b-a44040f0923c 

 metadata:
 {&#39;file_path&#39;: &#39;/home/gopi/Documents/small_llm/llmbook/data/chapter7/old-man-and-the-sea.txt&#39;, &#39;file_name&#39;: &#39;old-man-and-the-sea.txt&#39;, &#39;file_type&#39;: &#39;text/plain&#39;, &#39;file_size&#39;: 43188, &#39;creation_date&#39;: &#39;2024-08-09&#39;, &#39;last_modified_date&#39;: &#39;2024-08-09&#39;}
</pre></div>
</div>
</div>
</div>
<p>Document is a generic container for any data source. They can be constructed manually or through data loaders. The previous example we used SimpleDirectoryReader to create a document container for old-man-and-sea.txt file in the local directory. In addition to data Document also stores the metadata.</p>
</section>
</section>
<section id="nodes">
<h2>Nodes<a class="headerlink" href="#nodes" title="Link to this heading">#</a></h2>
<p>For indexing purpose, the Document is broken down into chunks. A Node represents a chunk.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">llama_index.core.node_parser</span> <span class="kn">import</span> <span class="n">SentenceSplitter</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">SentenceSplitter</span><span class="p">()</span>
<span class="n">nodes</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">get_nodes_from_documents</span><span class="p">(</span><span class="n">oldmansea</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>14
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">nod</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The Project Gutenberg EBook of The Old Man of the Sea, by W.W. Jacobs

This eBook is for the use of anyone anywhere at no cost and with
almost no restrictions whatsoever.  You may copy it, give it away or
re-use it under the terms of the Project Gutenberg License included
with this eBook or online at www.gutenberg.net


Title: The Old Man of the Sea
       Ship&#39;s Company, Part 11.

Author: W.W. Jacobs

Release Date: January 1, 2004 [EBook #10571]

Language: English


*** START OF THIS PROJECT GUTENBERG EBOOK THE OLD MAN OF THE SEA ***




Produced by David Widger




SHIP&#39;S COMPANY

By W.W. Jacobs



THE OLD MAN OF THE SEA


&quot;What I want you to do,&quot; said Mr. George Wright, as he leaned towards the
old sailor, &quot;is to be an uncle to me.&quot;

&quot;Aye, aye,&quot; said the mystified Mr. Kemp, pausing with a mug of beer
midway to his lips.

&quot;A rich uncle,&quot; continued the young man, lowering his voice to prevent
any keen ears in the next bar from acquiring useless knowledge.  &quot;An
uncle from New Zealand, who is going to leave me all &#39;is money.&quot;

&quot;Where&#39;s it coming from?&quot;  demanded Mr. Kemp, with a little excitement.

&quot;It ain&#39;t coming,&quot; was the reply.  &quot;You&#39;ve only got to say you&#39;ve got it.
Fact of the matter is, I&#39;ve got my eye on a young lady; there&#39;s another
chap after &#39;er too, and if she thought I&#39;d got a rich uncle it might make
all the difference.  She knows I &#39;ad an uncle that went to New Zealand
and was never heard of since.  That&#39;s what made me think of it.&quot;

Mr. Kemp drank his beer in thoughtful silence.  &quot;How can I be a rich
uncle without any brass?&quot;  he inquired at length.

&quot;I should &#39;ave to lend you some--a little,&quot; said Mr. Wright.

[Illustration: &quot;What I want you to do,&quot; said Mr. George Wright, &quot;is to
be an uncle to me.&quot;]

The old man pondered.  &quot;I&#39;ve had money lent me before,&quot; he said,
candidly, &quot;but I can&#39;t call to mind ever paying it back.  I always meant
to, but that&#39;s as far as it got.&quot;

&quot;It don&#39;t matter,&quot; said the other.  &quot;It&#39;ll only be for a little while,
and then you&#39;ll &#39;ave a letter calling you back to New Zealand.  See?  And
you&#39;ll go back, promising to come home in a year&#39;s time, after you&#39;ve
wound up your business, and leave us all your money.  See?&quot;

Mr. Kemp scratched the back of his neck.  &quot;But she&#39;s sure to find it out
in time,&quot; he objected.

&quot;P&#39;r&#39;aps,&quot; said Mr. Wright.  &quot;And p&#39;r&#39;aps not.  There&#39;ll be plenty of
time for me to get married before she does, and you could write back and
say you had got married yourself, or given your money to a hospital.&quot;

He ordered some more beer for Mr. Kemp, and in a low voice gave him as
much of the family history as he considered necessary.

&quot;I&#39;ve only known you for about ten days,&quot; he concluded, &quot;but I&#39;d sooner
trust you than people I&#39;ve known for years.&quot;

&quot;I took a fancy to you the moment I set eyes on you,&quot; rejoined Mr. Kemp.
&quot;You&#39;re the living image of a young fellow that lent me five pounds once,
and was drowned afore my eyes the week after.  He &#39;ad a bit of a squint,
and I s&#39;pose that&#39;s how he came to fall overboard.&quot;

He emptied his mug, and then, accompanied by Mr. Wright, fetched his sea-
chest from the boarding-house where he was staying, and took it to the
young man&#39;s lodgings.  Fortunately for the latter&#39;s pocket the chest
contained a good best suit and boots, and the only expenses incurred were
for a large, soft felt hat and a gilded watch and chain.  Dressed in his
best, with a bulging pocket-book in his breast-pocket, he set out with
Mr. Wright on the following evening to make his first call.

Mr.
&quot;I took a fancy to you the moment I set eyes on you,&quot; rejoined Mr. Kemp.
&quot;You&#39;re the living image of a young fellow that lent me five pounds once,
and was drowned afore my eyes the week after.  He &#39;ad a bit of a squint,
and I s&#39;pose that&#39;s how he came to fall overboard.&quot;

He emptied his mug, and then, accompanied by Mr. Wright, fetched his sea-
chest from the boarding-house where he was staying, and took it to the
young man&#39;s lodgings.  Fortunately for the latter&#39;s pocket the chest
contained a good best suit and boots, and the only expenses incurred were
for a large, soft felt hat and a gilded watch and chain.  Dressed in his
best, with a bulging pocket-book in his breast-pocket, he set out with
Mr. Wright on the following evening to make his first call.

Mr. Wright, who was also in his best clothes, led the way to a small
tobacconist&#39;s in a side street off the Mile End Road, and, raising his
hat with some ceremony, shook hands with a good-looking young woman who
stood behind the counter: Mr. Kemp, adopting an air of scornful dignity
intended to indicate the possession of great wealth, waited.

&quot;This is my uncle,&quot; said Mr. Wright, speaking rapidly, &quot;from New Zealand,
the one I spoke to you about.  He turned up last night, and you might
have knocked me down with a feather.  The last person in the world I
expected to see.&quot;

Mr. Kemp, in a good rolling voice, said, &quot;Good evening, miss; I hope you
are well,&quot; and, subsiding into a chair, asked for a cigar.  His surprise
when he found that the best cigar they stocked only cost sixpence almost
assumed the dimensions of a grievance.

&quot;It&#39;ll do to go on with,&quot; he said, smelling it suspiciously.  &quot;Have you
got change for a fifty-pound note?&quot;

Miss Bradshaw, concealing her surprise by an effort, said that she would
see, and was scanning the contents of a drawer, when Mr. Kemp in some
haste discovered a few odd sovereigns in his waistcoat-pocket.  Five
minutes later he was sitting in the little room behind the shop, holding
forth to an admiring audience.

&quot;So far as I know,&quot; he said, in reply to a question of Mrs. Bradshaw&#39;s,
&quot;George is the only relation I&#39;ve got.  Him and me are quite alone, and I
can tell you I was glad to find him.&quot;

Mrs. Bradshaw sighed.  &quot;It&#39;s a pity you are so far apart,&quot; she said.

&quot;It&#39;s not for long,&quot; said Mr. Kemp.  &quot;I&#39;m just going back for about a
year to wind up things out there, and then I&#39;m coming back to leave my
old bones over here.  George has very kindly offered to let me live with
him.&quot;

&quot;He won&#39;t suffer for it, I&#39;ll be bound,&quot; said Mrs. Bradshaw, archly.

&quot;So far as money goes he won&#39;t,&quot; said the old man.  &quot;Not that that would
make any difference to George.&quot;

&quot;It would be the same to me if you hadn&#39;t got a farthing,&quot; said Mr.
Wright, promptly.

[Illustration: &quot;It&#39;ll do to go on with,&quot; he said]

Mr. Kemp, somewhat affected, shook hands with him, and leaning back in
the most comfortable chair in the room, described his life and struggles
in New Zealand.  Hard work, teetotalism, and the simple life combined
appeared to be responsible for a fortune which he affected to be too old
to enjoy.  Misunderstandings of a painful nature were avoided by a timely
admission that under medical advice he was now taking a fair amount of
stimulant.

[Illustration: &quot;&#39;Ow much did you say you&#39;d got in the bank?&quot;]

&quot;Mind,&quot; he said, as he walked home with the elated George, &quot;it&#39;s your
game, not mine, and it&#39;s sure to come a bit expensive.  I can&#39;t be a rich
uncle without spending a bit.  &#39;Ow much did you say you&#39;d got in the
bank?&quot;

&quot;We must be as careful as we can,&quot; said Mr. Wright, hastily.  &quot;One thing
is they can&#39;t leave the shop to go out much.  It&#39;s a very good little
business, and it ought to be all right for me and Bella one of these
days, eh?&quot;

Mr.
Misunderstandings of a painful nature were avoided by a timely
admission that under medical advice he was now taking a fair amount of
stimulant.

[Illustration: &quot;&#39;Ow much did you say you&#39;d got in the bank?&quot;]

&quot;Mind,&quot; he said, as he walked home with the elated George, &quot;it&#39;s your
game, not mine, and it&#39;s sure to come a bit expensive.  I can&#39;t be a rich
uncle without spending a bit.  &#39;Ow much did you say you&#39;d got in the
bank?&quot;

&quot;We must be as careful as we can,&quot; said Mr. Wright, hastily.  &quot;One thing
is they can&#39;t leave the shop to go out much.  It&#39;s a very good little
business, and it ought to be all right for me and Bella one of these
days, eh?&quot;

Mr. Kemp, prompted by a nudge in the ribs, assented.  &quot;It&#39;s wonderful how
they took it all in about me,&quot; he said; &quot;but I feel certain in my own
mind that I ought to chuck some money about.&quot;

&quot;Tell &#39;em of the money you have chucked about,&quot; said Mr. Wright.  &quot;It&#39;ll
do just as well, and come a good deal cheaper.  And you had better go
round alone to-morrow evening.  It&#39;ll look better.  Just go in for
another one of their sixpenny cigars.&quot;

Mr. Kemp obeyed, and the following evening, after sitting a little while
chatting in the shop, was invited into the parlour, where, mindful of Mr.
Wright&#39;s instructions, he held his listeners enthralled by tales of past
expenditure.  A tip of fifty pounds to his bedroom steward coming over
was characterized by Mrs. Bradshaw as extravagant.

&quot;Seems to be going all right,&quot; said Mr. Wright, as the old man made his
report; &quot;but be careful; don&#39;t go overdoing it.&quot;

Mr. Kemp nodded.  &quot;I can turn &#39;em round my little finger,&quot; he said.
&quot;You&#39;ll have Bella all to yourself to-morrow evening.&quot;

Mr. Wright flushed.  &quot;How did you manage that?&quot;  he inquired.  &quot;It&#39;s the
first time she has ever been out with me alone.&quot;

&quot;She ain&#39;t coming out,&quot; said Mr. Kemp.  &quot;She&#39;s going to stay at home and
mind the shop; it&#39;s the mother what&#39;s coming out.  Going to spend the
evening with me!&quot;

Mr. Wright frowned.  &quot;What did you do that for?&quot;  he demanded, hotly.

&quot;I didn&#39;t do it,&quot; said Mr. Kemp, equably; &quot;they done it.  The old lady
says that, just for once in her life, she wants to see how it feels to
spend money like water.&quot;

&quot;&lt;i&gt;Money like water!&lt;/i&gt;&quot;  repeated the horrified Mr. Wright.  &quot;Money like--
I&#39;ll &#39;money&#39; her--I&#39;ll----&quot;

&quot;It don&#39;t matter to me,&quot; said Mr. Kemp.  &quot;I can have a headache or a
chill, or something of that sort, if you like.  I don&#39;t want to go.  It&#39;s
no pleasure to me.&quot;

&quot;What will it cost?&quot;  demanded Mr. Wright, pacing up and down the room.

The rich uncle made a calculation.  &quot;She wants to go to a place called
the Empire,&quot; he said, slowly, &quot;and have something for supper, and there&#39;d
be cabs and things.  I dessay it would cost a couple o&#39; pounds, and it
might be more.  But I&#39;d just as soon ave&#39; a chill--just.&quot;

Mr. Wright groaned, and after talking of Mrs. Bradshaw as though she were
already his mother-in-law, produced the money.  His instructions as to
economy lasted almost up to the moment when he stood with Bella outside
the shop on the following evening and watched the couple go off.

&quot;It&#39;s wonderful how well they get on together,&quot; said Bella, as they
re-entered the shop and passed into the parlour.  &quot;I&#39;ve never seen mother
take to anybody so quick as she has to him.&quot;

&quot;I hope you like him, too,&quot; said Mr. Wright.

&quot;He&#39;s a dear,&quot; said Bella.  &quot;Fancy having all that money.  I wonder what
it feels like?&quot;

&quot;I suppose I shall know some day,&quot; said the young man, slowly; &quot;but it
won&#39;t be much good to me unless----&quot;

&quot;Unless?&quot;  said Bella, after a pause.
Mr. Wright groaned, and after talking of Mrs. Bradshaw as though she were
already his mother-in-law, produced the money.  His instructions as to
economy lasted almost up to the moment when he stood with Bella outside
the shop on the following evening and watched the couple go off.

&quot;It&#39;s wonderful how well they get on together,&quot; said Bella, as they
re-entered the shop and passed into the parlour.  &quot;I&#39;ve never seen mother
take to anybody so quick as she has to him.&quot;

&quot;I hope you like him, too,&quot; said Mr. Wright.

&quot;He&#39;s a dear,&quot; said Bella.  &quot;Fancy having all that money.  I wonder what
it feels like?&quot;

&quot;I suppose I shall know some day,&quot; said the young man, slowly; &quot;but it
won&#39;t be much good to me unless----&quot;

&quot;Unless?&quot;  said Bella, after a pause.

&quot;Unless it gives me what I want,&quot; replied the other.  &quot;I&#39;d sooner be a
poor man and married to the girl I love, than a millionaire.&quot;

Miss Bradshaw stole an uneasy glance at his somewhat sallow features, and
became thoughtful.

&quot;It&#39;s no good having diamonds and motor-cars and that sort of thing
unless you have somebody to share them with,&quot; pursued Mr. Wright.

Miss Bradshaw&#39;s eyes sparkled, and at that moment the shop-bell tinkled
and a lively whistle sounded.  She rose and went into the shop, and Mr.
Wright settled back in his chair and scowled darkly as he saw the
intruder.

&quot;Good evening,&quot; said the latter.  &quot;I want a sixpenny smoke for twopence,
please.  How are we this evening?  Sitting up and taking nourishment?&quot;

Miss Bradshaw told him to behave himself.

&quot;Always do,&quot; said the young man.  &quot;That&#39;s why I can never get anybody to
play with.  I had such an awful dream about you last night that I
couldn&#39;t rest till I saw you.  Awful it was.&quot;

&quot;What was it?&quot;  inquired Miss Bradshaw.

&quot;Dreamt you were married,&quot; said Mr. Hills, smiling at her.

Miss Bradshaw tossed her head.  &quot;Who to, pray?&quot;  she inquired.

&quot;Me,&quot; said Mr. Hills, simply.  &quot;I woke up in a cold perspiration.
Halloa! is that Georgie in there?  How are you, George?  Better?&quot;

&quot;I&#39;m all right,&quot; said Mr. Wright, with dignity, as the other hooked the
door open with his stick and nodded at him.

&quot;Well, why don&#39;t you look it?&quot;  demanded the lively Mr. Hills.  &quot;Have you
got your feet wet, or what?&quot;

&quot;Oh, be quiet,&quot; said Miss Bradshaw, smiling at him.

&quot;Right-o,&quot; said Mr. Hills, dropping into a chair by the counter and
caressing his moustache.  &quot;But you wouldn&#39;t speak to me like that if you
knew what a terrible day I&#39;ve had.&quot;

&quot;What have you been doing?&quot;  asked the girl.

&quot;Working,&quot; said the other, with a huge sigh.  &quot;Where&#39;s the millionaire?
I came round on purpose to have a look at him.&quot;

&quot;Him and mother have gone to the Empire?&quot;  said Miss Bradshaw.

Mr. Hills gave three long, penetrating whistles, and then, placing his
cigar with great care on the counter, hid his face in a huge
handkerchief.  Miss Bradshaw, glanced from him to the frowning Mr.
Wright, and then, entering the parlour, closed the door with a bang.  Mr.
Hills took the hint, and with a somewhat thoughtful grin departed.

He came in next evening for another cigar, and heard all that there was
to hear about the Empire.  Mrs. Bradshaw would have treated him but
coldly, but the innocent Mr. Kemp, charmed by his manner, paid him great
attention.

&quot;He&#39;s just like what I was at his age,&quot; he said.  &quot;Lively.&quot;

&quot;I&#39;m not a patch on you,&quot; said Mr. Hills, edging his way by slow degrees
into the parlour.  &quot;I don&#39;t take young ladies to the Empire.  Were you
telling me you came over here to get married, or did I dream it?&quot;

&quot;&#39;Ark at him,&quot; said the blushing Mr. Kemp, as Mrs. Bradshaw shook her
head at the offender and told him to behave himself.

&quot;He&#39;s a man any woman might be happy with,&quot; said Mr. Hills.
He came in next evening for another cigar, and heard all that there was
to hear about the Empire.  Mrs. Bradshaw would have treated him but
coldly, but the innocent Mr. Kemp, charmed by his manner, paid him great
attention.

&quot;He&#39;s just like what I was at his age,&quot; he said.  &quot;Lively.&quot;

&quot;I&#39;m not a patch on you,&quot; said Mr. Hills, edging his way by slow degrees
into the parlour.  &quot;I don&#39;t take young ladies to the Empire.  Were you
telling me you came over here to get married, or did I dream it?&quot;

&quot;&#39;Ark at him,&quot; said the blushing Mr. Kemp, as Mrs. Bradshaw shook her
head at the offender and told him to behave himself.

&quot;He&#39;s a man any woman might be happy with,&quot; said Mr. Hills.  &quot;He never
knows how much there is in his trousers-pocket.  Fancy sewing on buttons
for a man like that.  Gold-mining ain&#39;t in it.&quot;

Mrs. Bradshaw shook her head at him again, and Mr. Hills, after
apologizing to her for revealing her innermost thoughts before the most
guileless of men, began to question Mr. Kemp as to the prospects of a
bright and energetic young man, with a distaste for work, in New Zealand.
The audience listened with keen attention to the replies, the only
disturbing factor being a cough of Mr. Wright&#39;s, which became more and
more troublesome as the evening wore on.  By the time uncle and nephew
rose to depart the latter was so hoarse that he could scarcely speak.

&quot;Why didn&#39;t you tell &#39;em you had got a letter calling you home, as I told
you?&quot;  he vociferated, as soon as they were clear of the shop.

&quot;I--I forgot it,&quot; said the old man.

&quot;Forgot it!&quot;  repeated the incensed Mr. Wright.

&quot;What did you think I was coughing like that for--fun?&quot;

&quot;I forgot it,&quot; said the old man, doggedly.  &quot;Besides, if you take my
advice, you&#39;d better let me stay a little longer to make sure of things.&quot;

Mr. Wright laughed disagreeably.  &quot;I dare say,&quot; he said; &quot;but I am
managing this affair, not you.  Now, you go round to-morrow afternoon and
tell them you&#39;re off.  D&#39;ye hear?  D&#39;ye think I&#39;m made of money?  And
what do you mean by making such a fuss of that fool, Charlie Hills?  You
know he is after Bella.&quot;

He walked the rest of the way home in indignant silence, and, after
giving minute instructions to Mr. Kemp next morning at breakfast, went
off to work in a more cheerful frame of mind.  Mr. Kemp was out when he
returned, and after making his toilet he followed him to Mrs. Bradshaw&#39;s.

To his annoyance, he found Mr. Hills there again; and, moreover, it soon
became clear to him that Mr. Kemp had said nothing about his approaching
departure.  Coughs and scowls passed unheeded, and at last in a
hesitating voice, he broached the subject himself.  There was a general
chorus of lamentation.

&quot;I hadn&#39;t got the heart to tell you,&quot; said Mr. Kemp.  &quot;I don&#39;t know when
I&#39;ve been so happy.&quot;

&quot;But you haven&#39;t got to go back immediate,&quot; said Mrs. Bradshaw.

&quot;To-morrow,&quot; said Mr. Wright, before the old man could reply.
&quot;Business.&quot;

&quot;Must you go,&quot; said Mrs. Bradshaw.

Mr. Kemp smiled feebly.  &quot;I suppose I ought to,&quot; he replied, in a
hesitating voice.

&quot;Take my tip and give yourself a bit of a holiday before you go back,&quot;
urged Mr. Hills.

&quot;Just for a few days,&quot; pleaded Bella.

&quot;To please us,&quot; said Mrs. Bradshaw.  &quot;Think &#39;ow George&#39;ll miss you.&quot;

&quot;Lay hold of him and don&#39;t let him go,&quot; said Mr. Hills.

He took Mr. Kemp round the waist, and the laughing Bella and her mother
each secured an arm.  An appeal to Mr. Wright to secure his legs passed
unheeded.

&quot;We don&#39;t let you go till you promise,&quot; said Mrs. Bradshaw.

Mr. Kemp smiled and shook his head.  &quot;Promise?&quot;  said Bella.
&quot;Business.&quot;

&quot;Must you go,&quot; said Mrs. Bradshaw.

Mr. Kemp smiled feebly.  &quot;I suppose I ought to,&quot; he replied, in a
hesitating voice.

&quot;Take my tip and give yourself a bit of a holiday before you go back,&quot;
urged Mr. Hills.

&quot;Just for a few days,&quot; pleaded Bella.

&quot;To please us,&quot; said Mrs. Bradshaw.  &quot;Think &#39;ow George&#39;ll miss you.&quot;

&quot;Lay hold of him and don&#39;t let him go,&quot; said Mr. Hills.

He took Mr. Kemp round the waist, and the laughing Bella and her mother
each secured an arm.  An appeal to Mr. Wright to secure his legs passed
unheeded.

&quot;We don&#39;t let you go till you promise,&quot; said Mrs. Bradshaw.

Mr. Kemp smiled and shook his head.  &quot;Promise?&quot;  said Bella.

&quot;Well, well,&quot; said Mr. Kemp; &quot;p&#39;r&#39;aps--&quot;

&quot;He must go back,&quot; shouted the alarmed  Mr. Wright.

&quot;Let him speak for himself,&quot; exclaimed Bella, indignantly.

&quot;Just another week then,&quot; said Mr. Kemp.  &quot;It&#39;s no good having money if I
can&#39;t please myself.&quot;

&quot;A week!&quot; shouted Mr. Wright, almost beside himself with rage and dismay.
&quot;A week!  Another week!  Why, you told me----&quot;

&quot;Oh, don&#39;t listen to him,&quot; said Mrs. Bradshaw.  &quot;Croaker!  It&#39;s his own
business, ain&#39;t it?  And he knows best, don&#39;t he?  What&#39;s it got to do
with you?&quot;

She patted Mr. Kemp&#39;s hand; Mr. Kemp patted back, and with his disengaged
hand helped himself to a glass of beer--the fourth--and beamed in a
friendly fashion upon the company.

&quot;George!&quot;  he said, suddenly.

&quot;Yes,&quot; said Mr. Wright, in a harsh voice.

&quot;Did you think to bring my pocket-book along with you?&quot;

&quot;No,&quot; said Mr. Wright, sharply; &quot;I didn&#39;t.&quot;

&quot;Tt-tt,&quot; said the old man, with a gesture of annoyance.  &quot;Well, lend me a
couple of pounds, then, or else run back and fetch my pocket-book,&quot; he
added, with a sly grin.

Mr. Wright&#39;s face worked with impotent fury.  &quot;What--what--do you--want
it for?&quot;  he gasped.

Mrs. Bradshaw&#39;s &quot;Well! Well!&quot; seemed to sum up the general feeling; Mr.
Kemp, shaking his head, eyed him with gentle reproach.

&quot;Me and Mrs. Bradshaw are going to gave another evening out,&quot; he said,
quietly.  &quot;I&#39;ve only got a few more days, and I must make hay while the
sun shines.&quot;

To Mr. Wright the room seemed to revolve slowly on its axis, but,
regaining his self-possession by a supreme effort, he took out his purse
and produced the amount.  Mrs. Bradshaw, after a few feminine
protestations, went upstairs to put her bonnet on.

&quot;And you can go and fetch a hansom-cab, George, while she&#39;s a-doing of
it,&quot; said Mr. Kemp.  &quot;Pick out a good &#39;orse--spotted-grey, if you can.&quot;

Mr. Wright arose and, departing with a suddenness that was almost
startling, exploded harmlessly in front of the barber&#39;s, next door but
one.  Then with lagging steps he went in search of the shabbiest cab and
oldest horse he could find.

&quot;Thankee, my boy,&quot; said Mr. Kemp, bluffly, as he helped Mrs. Bradshaw in
and stood with his foot on the step.  &quot;By the way, you had better go back
and lock my pocket-book up.  I left it on the washstand, and there&#39;s best
part of a thousand pounds in it.  You can take fifty for yourself to buy
smokes with.&quot;

There was a murmur of admiration, and Mr. Wright, with a frantic attempt
to keep up appearances, tried to thank him, but in vain.  Long after the
cab had rolled away he stood on the pavement trying to think out a
position which was rapidly becoming unendurable.  Still keeping up
appearances, he had to pretend to go home to look after the pocket-book,
leaving the jubilant Mr. Hills to improve the shining hour with Miss
Bradshaw.
&quot;Thankee, my boy,&quot; said Mr. Kemp, bluffly, as he helped Mrs. Bradshaw in
and stood with his foot on the step.  &quot;By the way, you had better go back
and lock my pocket-book up.  I left it on the washstand, and there&#39;s best
part of a thousand pounds in it.  You can take fifty for yourself to buy
smokes with.&quot;

There was a murmur of admiration, and Mr. Wright, with a frantic attempt
to keep up appearances, tried to thank him, but in vain.  Long after the
cab had rolled away he stood on the pavement trying to think out a
position which was rapidly becoming unendurable.  Still keeping up
appearances, he had to pretend to go home to look after the pocket-book,
leaving the jubilant Mr. Hills to improve the shining hour with Miss
Bradshaw.

Mr. Kemp, returning home at midnight--in a cab--found the young man
waiting up for him, and, taking a seat on the edge of the table, listened
unmoved to a word-picture of himself which seemed interminable.  He was
only moved to speech when Mr. Wright described him as a white-whiskered
jezebel who was a disgrace to his sex, and then merely in the interests
of natural science.

&quot;Don&#39;t you worry,&quot; he said, as the other paused from exhaustion.  &quot;It
won&#39;t be for long now.&quot;

&quot;Long?&quot;  said Mr. Wright, panting.  &quot;First thing to-morrow morning you
have a telegram calling you back--a telegram that must be minded.  D&#39;ye
see?&quot;

&quot;No, I don&#39;t,&quot; said Mr. Kemp, plainly.  &quot;I&#39;m not going back, never no
more--never!  I&#39;m going to stop here and court Mrs. Bradshaw.&quot;

Mr. Wright fought for breath.  &quot;You--you can&#39;t!&quot; he gasped.

&quot;I&#39;m going to have a try,&quot; said the old man.  &quot;I&#39;m sick of going to sea,
and it&#39;ll be a nice comfortable home for my old age.  You marry Bella,
and I&#39;ll marry her mother.  Happy family!&quot;

Mr. Wright, trembling with rage, sat down to recover, and, regaining his
composure after a time, pointed out almost calmly the various
difficulties in the way.

&quot;I&#39;ve thought it all out,&quot; said Mr. Kemp, nodding.  &quot;She mustn&#39;t know I&#39;m
not rich till after we&#39;re married; then I &#39;ave a letter from New Zealand
saying I&#39;ve lost all my money.  It&#39;s just as easy to have that letter as
the one you spoke of.&quot;

&quot;And I&#39;m to find you money to play the rich uncle with till you&#39;re
married, I suppose,&quot; said Mr. Wright, in a grating voice, &quot;and then lose
Bella when Mrs. Bradshaw finds you&#39;ve lost your money?&quot;

Mr. Kemp scratched his ear.  &quot;That&#39;s your lookout,&quot; he said, at last.

&quot;Now, look here,&quot; said Mr. Wright, with great determination.  &quot;Either you
go and tell them that you&#39;ve been telegraphed for--cabled is the proper
word--or I tell them the truth.&quot;

&quot;That&#39;ll settle you then,&quot; said Mr. Kemp.

&quot;No more than the other would,&quot; retorted the young man, &quot;and it&#39;ll come
cheaper.  One thing I&#39;ll take my oath of, and that is I won&#39;t give you
another farthing; but if you do as I tell you I&#39;ll give you a quid for
luck.  Now, think it over.&quot;

Mr. Kemp thought it over, and after a vain attempt to raise the promised
reward to five pounds, finally compounded for two, and went off to bed
after a few stormy words on selfishness and ingratitude.  He declined to
speak to his host at breakfast next morning, and accompanied him in the
evening with the air of a martyr going to the stake.  He listened in
stony silence to the young man&#39;s instructions, and only spoke when the
latter refused to pay the two pounds in advance.

The news, communicated in halting accents by Mr. Kemp, was received with
flattering dismay.  Mrs. Bradshaw refused to believe her ears, and it was
only after the information had been repeated and confirmed by Mr. Wright
that she understood.

&quot;I must go,&quot; said Mr. Kemp.
Now, think it over.&quot;

Mr. Kemp thought it over, and after a vain attempt to raise the promised
reward to five pounds, finally compounded for two, and went off to bed
after a few stormy words on selfishness and ingratitude.  He declined to
speak to his host at breakfast next morning, and accompanied him in the
evening with the air of a martyr going to the stake.  He listened in
stony silence to the young man&#39;s instructions, and only spoke when the
latter refused to pay the two pounds in advance.

The news, communicated in halting accents by Mr. Kemp, was received with
flattering dismay.  Mrs. Bradshaw refused to believe her ears, and it was
only after the information had been repeated and confirmed by Mr. Wright
that she understood.

&quot;I must go,&quot; said Mr. Kemp.  &quot;I&#39;ve spent over eleven pounds cabling
to-day; but it&#39;s all no good.&quot;

&quot;But you&#39;re coming back?&quot;  said Mr. Hills.

&quot;O&#39; course I am,&quot; was the reply.  &quot;George is the only relation I&#39;ve got,
and I&#39;ve got to look after him, I suppose.  After all, blood is thicker
than water.&quot;

&quot;Hear, hear!&quot; said Mrs. Bradshaw, piously.

&quot;And there&#39;s you and Bella,&quot; continued Mr. Kemp; &quot;two of the best that
ever breathed.&quot;

The ladies looked down.

&quot;And Charlie Hills; I don&#39;t know--I don&#39;t know &lt;i&gt;when&lt;/i&gt; I&#39;ve took such a
fancy to anybody as I have to &#39;im.  If I was a young gal--a single young
gal--he&#39;s--the other half,&quot; he said, slowly, as he paused--&quot;just the one I
should fancy.  He&#39;s a good-&#39;arted, good-looking----&quot;

&quot;Draw it mild,&quot; interrupted the blushing Mr. Hills as Mr. Wright bestowed
a ferocious glance upon the speaker.

&quot;Clever, lively young fellow,&quot; concluded Mr. Kemp.  &quot;George!&quot;

&quot;Yes,&quot; said Mr. Wright.

&quot;I&#39;m going now.  I&#39;ve got to catch the train for Southampton, but I don&#39;t
want you to come with me.  I prefer to be alone.  You stay here and cheer
them up.  Oh, and before I forget it, lend me a couple o&#39; pounds out o&#39;
that fifty I gave you last night.  I&#39;ve given all my small change away.&quot;

He looked up and met Mr. Wright&#39;s eye; the latter, too affected to speak,
took out the money and passed it over.

&quot;We never know what may happen to us,&quot; said the old man, solemnly, as he
rose and buttoned his coat.  &quot;I&#39;m an old man and I like to have things
ship-shape.  I&#39;ve spent nearly the whole day with my lawyer, and if
anything &#39;appens to my old carcass it won&#39;t make any difference.  I have
left half my money to George; half of all I have is to be his.&quot;

In the midst of an awed silence he went round and shook hands.

&quot;The other half,&quot; with his hand on the door--&quot;the other half and my best
gold watch and chain I have left to my dear young pal, Charlie Hills.
Good-bye, Georgie!&quot;
I&#39;ve given all my small change away.&quot;

He looked up and met Mr. Wright&#39;s eye; the latter, too affected to speak,
took out the money and passed it over.

&quot;We never know what may happen to us,&quot; said the old man, solemnly, as he
rose and buttoned his coat.  &quot;I&#39;m an old man and I like to have things
ship-shape.  I&#39;ve spent nearly the whole day with my lawyer, and if
anything &#39;appens to my old carcass it won&#39;t make any difference.  I have
left half my money to George; half of all I have is to be his.&quot;

In the midst of an awed silence he went round and shook hands.

&quot;The other half,&quot; with his hand on the door--&quot;the other half and my best
gold watch and chain I have left to my dear young pal, Charlie Hills.
Good-bye, Georgie!&quot;





End of the Project Gutenberg EBook of The Old Man of the Sea, by W.W. Jacobs

*** END OF THIS PROJECT GUTENBERG EBOOK THE OLD MAN OF THE SEA ***

***** This file should be named 10571.txt or 10571.zip *****
This and all associated files of various formats will be found in:
        http://www.gutenberg.net/1/0/5/7/10571/

Produced by David Widger

Updated editions will replace the previous one--the old editions
will be renamed.

Creating the works from public domain print editions means that no
one owns a United States copyright in these works, so the Foundation
(and you!) can copy and distribute it in the United States without
permission and without paying copyright royalties.  Special rules,
set forth in the General Terms of Use part of this license, apply to
copying and distributing Project Gutenberg-tm electronic works to
protect the PROJECT GUTENBERG-tm concept and trademark.  Project
Gutenberg is a registered trademark, and may not be used if you
charge for the eBooks, unless you receive specific permission.  If you
do not charge anything for copies of this eBook, complying with the
rules is very easy.  You may use this eBook for nearly any purpose
such as creation of derivative works, reports, performances and
research.  They may be modified and printed and given away--you may do
practically ANYTHING with public domain eBooks.  Redistribution is
subject to the trademark license, especially commercial
redistribution.



*** START: FULL LICENSE ***

THE FULL PROJECT GUTENBERG LICENSE
PLEASE READ THIS BEFORE YOU DISTRIBUTE OR USE THIS WORK

To protect the Project Gutenberg-tm mission of promoting the free
distribution of electronic works, by using or distributing this work
(or any other work associated in any way with the phrase &quot;Project
Gutenberg&quot;), you agree to comply with all the terms of the Full Project
Gutenberg-tm License (available with this file or online at
http://gutenberg.net/license).


Section 1.  General Terms of Use and Redistributing Project Gutenberg-tm
electronic works

1.A.  By reading or using any part of this Project Gutenberg-tm
electronic work, you indicate that you have read, understand, agree to
and accept all the terms of this license and intellectual property
(trademark/copyright) agreement.  If you do not agree to abide by all
the terms of this agreement, you must cease using and return or destroy
all copies of Project Gutenberg-tm electronic works in your possession.
If you paid a fee for obtaining a copy of or access to a Project
Gutenberg-tm electronic work and you do not agree to be bound by the
terms of this agreement, you may obtain a refund from the person or
entity to whom you paid the fee as set forth in paragraph 1.E.8.

1.B.  &quot;Project Gutenberg&quot; is a registered trademark.  It may only be
used on or associated in any way with an electronic work by people who
agree to be bound by the terms of this agreement.  There are a few
things that you can do with most Project Gutenberg-tm electronic works
even without complying with the full terms of this agreement.  See
paragraph 1.C below.  There are a lot of things you can do with Project
Gutenberg-tm electronic works if you follow the terms of this agreement
and help preserve free future access to Project Gutenberg-tm electronic
works.  See paragraph 1.E below.

1.C.  The Project Gutenberg Literary Archive Foundation (&quot;the Foundation&quot;
or PGLAF), owns a compilation copyright in the collection of Project
Gutenberg-tm electronic works.  Nearly all the individual works in the
collection are in the public domain in the United States.
1.B.  &quot;Project Gutenberg&quot; is a registered trademark.  It may only be
used on or associated in any way with an electronic work by people who
agree to be bound by the terms of this agreement.  There are a few
things that you can do with most Project Gutenberg-tm electronic works
even without complying with the full terms of this agreement.  See
paragraph 1.C below.  There are a lot of things you can do with Project
Gutenberg-tm electronic works if you follow the terms of this agreement
and help preserve free future access to Project Gutenberg-tm electronic
works.  See paragraph 1.E below.

1.C.  The Project Gutenberg Literary Archive Foundation (&quot;the Foundation&quot;
or PGLAF), owns a compilation copyright in the collection of Project
Gutenberg-tm electronic works.  Nearly all the individual works in the
collection are in the public domain in the United States.  If an
individual work is in the public domain in the United States and you are
located in the United States, we do not claim a right to prevent you from
copying, distributing, performing, displaying or creating derivative
works based on the work as long as all references to Project Gutenberg
are removed.  Of course, we hope that you will support the Project
Gutenberg-tm mission of promoting free access to electronic works by
freely sharing Project Gutenberg-tm works in compliance with the terms of
this agreement for keeping the Project Gutenberg-tm name associated with
the work.  You can easily comply with the terms of this agreement by
keeping this work in the same format with its attached full Project
Gutenberg-tm License when you share it without charge with others.

1.D.  The copyright laws of the place where you are located also govern
what you can do with this work.  Copyright laws in most countries are in
a constant state of change.  If you are outside the United States, check
the laws of your country in addition to the terms of this agreement
before downloading, copying, displaying, performing, distributing or
creating derivative works based on this work or any other Project
Gutenberg-tm work.  The Foundation makes no representations concerning
the copyright status of any work in any country outside the United
States.

1.E.  Unless you have removed all references to Project Gutenberg:

1.E.1.  The following sentence, with active links to, or other immediate
access to, the full Project Gutenberg-tm License must appear prominently
whenever any copy of a Project Gutenberg-tm work (any work on which the
phrase &quot;Project Gutenberg&quot; appears, or with which the phrase &quot;Project
Gutenberg&quot; is associated) is accessed, displayed, performed, viewed,
copied or distributed:

This eBook is for the use of anyone anywhere at no cost and with
almost no restrictions whatsoever.  You may copy it, give it away or
re-use it under the terms of the Project Gutenberg License included
with this eBook or online at www.gutenberg.net

1.E.2.  If an individual Project Gutenberg-tm electronic work is derived
from the public domain (does not contain a notice indicating that it is
posted with permission of the copyright holder), the work can be copied
and distributed to anyone in the United States without paying any fees
or charges.  If you are redistributing or providing access to a work
with the phrase &quot;Project Gutenberg&quot; associated with or appearing on the
work, you must comply either with the requirements of paragraphs 1.E.1
through 1.E.7 or obtain permission for the use of the work and the
Project Gutenberg-tm trademark as set forth in paragraphs 1.E.8 or
1.E.9.

1.E.3.  If an individual Project Gutenberg-tm electronic work is posted
with the permission of the copyright holder, your use and distribution
must comply with both paragraphs 1.E.1 through 1.E.7 and any additional
terms imposed by the copyright holder.  Additional terms will be linked
to the Project Gutenberg-tm License for all works posted with the
permission of the copyright holder found at the beginning of this work.

1.E.4.  Do not unlink or detach or remove the full Project Gutenberg-tm
License terms from this work, or any files containing a part of this
work or any other work associated with Project Gutenberg-tm.

1.E.5.  Do not copy, display, perform, distribute or redistribute this
electronic work, or any part of this electronic work, without
prominently displaying the sentence set forth in paragraph 1.E.1 with
active links or immediate access to the full terms of the Project
Gutenberg-tm License.

1.E.6.
Additional terms will be linked
to the Project Gutenberg-tm License for all works posted with the
permission of the copyright holder found at the beginning of this work.

1.E.4.  Do not unlink or detach or remove the full Project Gutenberg-tm
License terms from this work, or any files containing a part of this
work or any other work associated with Project Gutenberg-tm.

1.E.5.  Do not copy, display, perform, distribute or redistribute this
electronic work, or any part of this electronic work, without
prominently displaying the sentence set forth in paragraph 1.E.1 with
active links or immediate access to the full terms of the Project
Gutenberg-tm License.

1.E.6.  You may convert to and distribute this work in any binary,
compressed, marked up, nonproprietary or proprietary form, including any
word processing or hypertext form.  However, if you provide access to or
distribute copies of a Project Gutenberg-tm work in a format other than
&quot;Plain Vanilla ASCII&quot; or other format used in the official version
posted on the official Project Gutenberg-tm web site (www.gutenberg.net),
you must, at no additional cost, fee or expense to the user, provide a
copy, a means of exporting a copy, or a means of obtaining a copy upon
request, of the work in its original &quot;Plain Vanilla ASCII&quot; or other
form.  Any alternate format must include the full Project Gutenberg-tm
License as specified in paragraph 1.E.1.

1.E.7.  Do not charge a fee for access to, viewing, displaying,
performing, copying or distributing any Project Gutenberg-tm works
unless you comply with paragraph 1.E.8 or 1.E.9.

1.E.8.  You may charge a reasonable fee for copies of or providing
access to or distributing Project Gutenberg-tm electronic works provided
that

- You pay a royalty fee of 20% of the gross profits you derive from
     the use of Project Gutenberg-tm works calculated using the method
     you already use to calculate your applicable taxes.  The fee is
     owed to the owner of the Project Gutenberg-tm trademark, but he
     has agreed to donate royalties under this paragraph to the
     Project Gutenberg Literary Archive Foundation.  Royalty payments
     must be paid within 60 days following each date on which you
     prepare (or are legally required to prepare) your periodic tax
     returns.  Royalty payments should be clearly marked as such and
     sent to the Project Gutenberg Literary Archive Foundation at the
     address specified in Section 4, &quot;Information about donations to
     the Project Gutenberg Literary Archive Foundation.&quot;

- You provide a full refund of any money paid by a user who notifies
     you in writing (or by e-mail) within 30 days of receipt that s/he
     does not agree to the terms of the full Project Gutenberg-tm
     License.  You must require such a user to return or
     destroy all copies of the works possessed in a physical medium
     and discontinue all use of and all access to other copies of
     Project Gutenberg-tm works.

- You provide, in accordance with paragraph 1.F.3, a full refund of any
     money paid for a work or a replacement copy, if a defect in the
     electronic work is discovered and reported to you within 90 days
     of receipt of the work.

- You comply with all other terms of this agreement for free
     distribution of Project Gutenberg-tm works.

1.E.9.  If you wish to charge a fee or distribute a Project Gutenberg-tm
electronic work or group of works on different terms than are set
forth in this agreement, you must obtain permission in writing from
both the Project Gutenberg Literary Archive Foundation and Michael
Hart, the owner of the Project Gutenberg-tm trademark.  Contact the
Foundation as set forth in Section 3 below.

1.F.

1.F.1.  Project Gutenberg volunteers and employees expend considerable
effort to identify, do copyright research on, transcribe and proofread
public domain works in creating the Project Gutenberg-tm
collection.  Despite these efforts, Project Gutenberg-tm electronic
works, and the medium on which they may be stored, may contain
&quot;Defects,&quot; such as, but not limited to, incomplete, inaccurate or
corrupt data, transcription errors, a copyright or other intellectual
property infringement, a defective or damaged disk or other medium, a
computer virus, or computer codes that damage or cannot be read by
your equipment.

1.F.2.
Contact the
Foundation as set forth in Section 3 below.

1.F.

1.F.1.  Project Gutenberg volunteers and employees expend considerable
effort to identify, do copyright research on, transcribe and proofread
public domain works in creating the Project Gutenberg-tm
collection.  Despite these efforts, Project Gutenberg-tm electronic
works, and the medium on which they may be stored, may contain
&quot;Defects,&quot; such as, but not limited to, incomplete, inaccurate or
corrupt data, transcription errors, a copyright or other intellectual
property infringement, a defective or damaged disk or other medium, a
computer virus, or computer codes that damage or cannot be read by
your equipment.

1.F.2.  LIMITED WARRANTY, DISCLAIMER OF DAMAGES - Except for the &quot;Right
of Replacement or Refund&quot; described in paragraph 1.F.3, the Project
Gutenberg Literary Archive Foundation, the owner of the Project
Gutenberg-tm trademark, and any other party distributing a Project
Gutenberg-tm electronic work under this agreement, disclaim all
liability to you for damages, costs and expenses, including legal
fees.  YOU AGREE THAT YOU HAVE NO REMEDIES FOR NEGLIGENCE, STRICT
LIABILITY, BREACH OF WARRANTY OR BREACH OF CONTRACT EXCEPT THOSE
PROVIDED IN PARAGRAPH F3.  YOU AGREE THAT THE FOUNDATION, THE
TRADEMARK OWNER, AND ANY DISTRIBUTOR UNDER THIS AGREEMENT WILL NOT BE
LIABLE TO YOU FOR ACTUAL, DIRECT, INDIRECT, CONSEQUENTIAL, PUNITIVE OR
INCIDENTAL DAMAGES EVEN IF YOU GIVE NOTICE OF THE POSSIBILITY OF SUCH
DAMAGE.

1.F.3.  LIMITED RIGHT OF REPLACEMENT OR REFUND - If you discover a
defect in this electronic work within 90 days of receiving it, you can
receive a refund of the money (if any) you paid for it by sending a
written explanation to the person you received the work from.  If you
received the work on a physical medium, you must return the medium with
your written explanation.  The person or entity that provided you with
the defective work may elect to provide a replacement copy in lieu of a
refund.  If you received the work electronically, the person or entity
providing it to you may choose to give you a second opportunity to
receive the work electronically in lieu of a refund.  If the second copy
is also defective, you may demand a refund in writing without further
opportunities to fix the problem.

1.F.4.  Except for the limited right of replacement or refund set forth
in paragraph 1.F.3, this work is provided to you &#39;AS-IS,&quot; WITH NO OTHER
WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO
WARRANTIES OF MERCHANTIBILITY OR FITNESS FOR ANY PURPOSE.

1.F.5.  Some states do not allow disclaimers of certain implied
warranties or the exclusion or limitation of certain types of damages.
If any disclaimer or limitation set forth in this agreement violates the
law of the state applicable to this agreement, the agreement shall be
interpreted to make the maximum disclaimer or limitation permitted by
the applicable state law.  The invalidity or unenforceability of any
provision of this agreement shall not void the remaining provisions.

1.F.6.  INDEMNITY - You agree to indemnify and hold the Foundation, the
trademark owner, any agent or employee of the Foundation, anyone
providing copies of Project Gutenberg-tm electronic works in accordance
with this agreement, and any volunteers associated with the production,
promotion and distribution of Project Gutenberg-tm electronic works,
harmless from all liability, costs and expenses, including legal fees,
that arise directly or indirectly from any of the following which you do
or cause to occur: (a) distribution of this or any Project Gutenberg-tm
work, (b) alteration, modification, or additions or deletions to any
Project Gutenberg-tm work, and (c) any Defect you cause.
The invalidity or unenforceability of any
provision of this agreement shall not void the remaining provisions.

1.F.6.  INDEMNITY - You agree to indemnify and hold the Foundation, the
trademark owner, any agent or employee of the Foundation, anyone
providing copies of Project Gutenberg-tm electronic works in accordance
with this agreement, and any volunteers associated with the production,
promotion and distribution of Project Gutenberg-tm electronic works,
harmless from all liability, costs and expenses, including legal fees,
that arise directly or indirectly from any of the following which you do
or cause to occur: (a) distribution of this or any Project Gutenberg-tm
work, (b) alteration, modification, or additions or deletions to any
Project Gutenberg-tm work, and (c) any Defect you cause.


Section  2.  Information about the Mission of Project Gutenberg-tm

Project Gutenberg-tm is synonymous with the free distribution of
electronic works in formats readable by the widest variety of computers
including obsolete, old, middle-aged and new computers.  It exists
because of the efforts of hundreds of volunteers and donations from
people in all walks of life.

Volunteers and financial support to provide volunteers with the
assistance they need, is critical to reaching Project Gutenberg-tm&#39;s
goals and ensuring that the Project Gutenberg-tm collection will
remain freely available for generations to come.  In 2001, the Project
Gutenberg Literary Archive Foundation was created to provide a secure
and permanent future for Project Gutenberg-tm and future generations.
To learn more about the Project Gutenberg Literary Archive Foundation
and how your efforts and donations can help, see Sections 3 and 4
and the Foundation web page at http://www.pglaf.org.


Section 3.  Information about the Project Gutenberg Literary Archive
Foundation

The Project Gutenberg Literary Archive Foundation is a non profit
501(c)(3) educational corporation organized under the laws of the
state of Mississippi and granted tax exempt status by the Internal
Revenue Service.  The Foundation&#39;s EIN or federal tax identification
number is 64-6221541.  Its 501(c)(3) letter is posted at
http://pglaf.org/fundraising.  Contributions to the Project Gutenberg
Literary Archive Foundation are tax deductible to the full extent
permitted by U.S. federal laws and your state&#39;s laws.

The Foundation&#39;s principal office is located at 4557 Melan Dr. S.
Fairbanks, AK, 99712., but its volunteers and employees are scattered
throughout numerous locations.  Its business office is located at
809 North 1500 West, Salt Lake City, UT 84116, (801) 596-1887, email
business@pglaf.org.  Email contact links and up to date contact
information can be found at the Foundation&#39;s web site and official
page at http://pglaf.org

For additional contact information:
     Dr. Gregory B. Newby
     Chief Executive and Director
     gbnewby@pglaf.org

Section 4.  Information about Donations to the Project Gutenberg
Literary Archive Foundation

Project Gutenberg-tm depends upon and cannot survive without wide
spread public support and donations to carry out its mission of
increasing the number of public domain and licensed works that can be
freely distributed in machine readable form accessible by the widest
array of equipment including outdated equipment.  Many small donations
($1 to $5,000) are particularly important to maintaining tax exempt
status with the IRS.

The Foundation is committed to complying with the laws regulating
charities and charitable donations in all 50 states of the United
States.  Compliance requirements are not uniform and it takes a
considerable effort, much paperwork and many fees to meet and keep up
with these requirements.  We do not solicit donations in locations
where we have not received written confirmation of compliance.  To
SEND DONATIONS or determine the status of compliance for any
particular state visit http://pglaf.org

While we cannot and do not solicit contributions from states where we
have not met the solicitation requirements, we know of no prohibition
against accepting unsolicited donations from donors in such states who
approach us with offers to donate.

International donations are gratefully accepted, but we cannot make
any statements concerning tax treatment of donations received from
outside the United States.  U.S. laws alone swamp our small staff.

Please check the Project Gutenberg Web pages for current donation
methods and addresses.  Donations are accepted in a number of other
ways including including checks, online payments and credit card
donations.  To donate, please visit: http://pglaf.org/donate
Section 5.  General Information About Project Gutenberg-tm electronic
works.

Professor Michael S. Hart is the originator of the Project Gutenberg-tm
concept of a library of electronic works that could be freely shared
with anyone.  For thirty years, he produced and distributed Project
Gutenberg-tm eBooks with only a loose network of volunteer support.

Project Gutenberg-tm eBooks are often created from several printed
editions, all of which are confirmed as Public Domain in the U.S.
unless a copyright notice is included.  Thus, we do not necessarily
keep eBooks in compliance with any particular paper edition.

Each eBook is in a subdirectory of the same number as the eBook&#39;s
eBook number, often in several formats including plain vanilla ASCII,
compressed (zipped), HTML and others.

Corrected EDITIONS of our eBooks replace the old file and take over
the old filename and etext number.  The replaced older file is renamed.
VERSIONS based on separate sources are treated as new eBooks receiving
new filenames and etext numbers.

Most people start at our Web site which has the main PG search facility:

     http://www.gutenberg.net

This Web site includes information about Project Gutenberg-tm,
including how to make donations to the Project Gutenberg Literary
Archive Foundation, how to help produce our new eBooks, and how to
subscribe to our email newsletter to hear about new eBooks.

EBooks posted prior to November 2003, with eBook numbers BELOW #10000,
are filed in directories based on their release date.  If you want to
download any of these eBooks directly, rather than using the regular
search system you may utilize the following addresses and just
download by the etext year.

     http://www.gutenberg.net/etext06

    (Or /etext 05, 04, 03, 02, 01, 00, 99,
     98, 97, 96, 95, 94, 93, 92, 92, 91 or 90)

EBooks posted since November 2003, with etext numbers OVER #10000, are
filed in a different way.  The year of a release date is no longer part
of the directory path.  The path is based on the etext number (which is
identical to the filename).  The path to the file is made up of single
digits corresponding to all but the last digit in the filename.  For
example an eBook of filename 10234 would be found at:

     http://www.gutenberg.net/1/0/2/3/10234

or filename 24689 would be found at:
     http://www.gutenberg.net/2/4/6/8/24689

An alternative method of locating eBooks:
     http://www.gutenberg.net/GUTINDEX.ALL
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">llama_index.core.schema</span> <span class="kn">import</span> <span class="n">MetadataMode</span>

<span class="k">for</span> <span class="n">document</span> <span class="ow">in</span> <span class="n">oldmansea</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;What LLM sees:</span><span class="se">\n</span><span class="si">{</span><span class="n">document</span><span class="o">.</span><span class="n">get_content</span><span class="p">(</span><span class="n">MetadataMode</span><span class="o">.</span><span class="n">LLM</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>What LLM sees:
file_path: /home/gopi/Documents/small_llm/llmbook/data/chapter7/old-man-and-the-sea.txt

The Project Gutenberg EBook of The Old Man of the Sea, by W.W. Jacobs

This eBook is for the use of anyone anywhere at no cost and with
almost no restrictions whatsoever.  You may copy it, give it away or
re-use it under the terms of the Project Gutenberg License included
with this eBook or online at www.gutenberg.net


Title: The Old Man of the Sea
       Ship&#39;s Company, Part 11.

Author: W.W. Jacobs

Release Date: January 1, 2004 [EBook #10571]

Language: English


*** START OF THIS PROJECT GUTENBERG EBOOK THE OLD MAN OF THE SEA ***




Produced by David Widger




SHIP&#39;S COMPANY

By W.W. Jacobs



THE OLD MAN OF THE SEA


&quot;What I want you to do,&quot; said Mr. George Wright, as he leaned towards the
old sailor, &quot;is to be an uncle to me.&quot;

&quot;Aye, aye,&quot; said the mystified Mr. Kemp, pausing with a mug of beer
midway to his lips.

&quot;A rich uncle,&quot; continued the young man, lowering his voice to prevent
any keen ears in the next bar from acquiring useless knowledge.  &quot;An
uncle from New Zealand, who is going to leave me all &#39;is money.&quot;

&quot;Where&#39;s it coming from?&quot;  demanded Mr. Kemp, with a little excitement.

&quot;It ain&#39;t coming,&quot; was the reply.  &quot;You&#39;ve only got to say you&#39;ve got it.
Fact of the matter is, I&#39;ve got my eye on a young lady; there&#39;s another
chap after &#39;er too, and if she thought I&#39;d got a rich uncle it might make
all the difference.  She knows I &#39;ad an uncle that went to New Zealand
and was never heard of since.  That&#39;s what made me think of it.&quot;

Mr. Kemp drank his beer in thoughtful silence.  &quot;How can I be a rich
uncle without any brass?&quot;  he inquired at length.

&quot;I should &#39;ave to lend you some--a little,&quot; said Mr. Wright.

[Illustration: &quot;What I want you to do,&quot; said Mr. George Wright, &quot;is to
be an uncle to me.&quot;]

The old man pondered.  &quot;I&#39;ve had money lent me before,&quot; he said,
candidly, &quot;but I can&#39;t call to mind ever paying it back.  I always meant
to, but that&#39;s as far as it got.&quot;

&quot;It don&#39;t matter,&quot; said the other.  &quot;It&#39;ll only be for a little while,
and then you&#39;ll &#39;ave a letter calling you back to New Zealand.  See?  And
you&#39;ll go back, promising to come home in a year&#39;s time, after you&#39;ve
wound up your business, and leave us all your money.  See?&quot;

Mr. Kemp scratched the back of his neck.  &quot;But she&#39;s sure to find it out
in time,&quot; he objected.

&quot;P&#39;r&#39;aps,&quot; said Mr. Wright.  &quot;And p&#39;r&#39;aps not.  There&#39;ll be plenty of
time for me to get married before she does, and you could write back and
say you had got married yourself, or given your money to a hospital.&quot;

He ordered some more beer for Mr. Kemp, and in a low voice gave him as
much of the family history as he considered necessary.

&quot;I&#39;ve only known you for about ten days,&quot; he concluded, &quot;but I&#39;d sooner
trust you than people I&#39;ve known for years.&quot;

&quot;I took a fancy to you the moment I set eyes on you,&quot; rejoined Mr. Kemp.
&quot;You&#39;re the living image of a young fellow that lent me five pounds once,
and was drowned afore my eyes the week after.  He &#39;ad a bit of a squint,
and I s&#39;pose that&#39;s how he came to fall overboard.&quot;

He emptied his mug, and then, accompanied by Mr. Wright, fetched his sea-
chest from the boarding-house where he was staying, and took it to the
young man&#39;s lodgings.  Fortunately for the latter&#39;s pocket the chest
contained a good best suit and boots, and the only expenses incurred were
for a large, soft felt hat and a gilded watch and chain.  Dressed in his
best, with a bulging pocket-book in his breast-pocket, he set out with
Mr. Wright on the following evening to make his first call.

Mr. Wright, who was also in his best clothes, led the way to a small
tobacconist&#39;s in a side street off the Mile End Road, and, raising his
hat with some ceremony, shook hands with a good-looking young woman who
stood behind the counter: Mr. Kemp, adopting an air of scornful dignity
intended to indicate the possession of great wealth, waited.

&quot;This is my uncle,&quot; said Mr. Wright, speaking rapidly, &quot;from New Zealand,
the one I spoke to you about.  He turned up last night, and you might
have knocked me down with a feather.  The last person in the world I
expected to see.&quot;

Mr. Kemp, in a good rolling voice, said, &quot;Good evening, miss; I hope you
are well,&quot; and, subsiding into a chair, asked for a cigar.  His surprise
when he found that the best cigar they stocked only cost sixpence almost
assumed the dimensions of a grievance.

&quot;It&#39;ll do to go on with,&quot; he said, smelling it suspiciously.  &quot;Have you
got change for a fifty-pound note?&quot;

Miss Bradshaw, concealing her surprise by an effort, said that she would
see, and was scanning the contents of a drawer, when Mr. Kemp in some
haste discovered a few odd sovereigns in his waistcoat-pocket.  Five
minutes later he was sitting in the little room behind the shop, holding
forth to an admiring audience.

&quot;So far as I know,&quot; he said, in reply to a question of Mrs. Bradshaw&#39;s,
&quot;George is the only relation I&#39;ve got.  Him and me are quite alone, and I
can tell you I was glad to find him.&quot;

Mrs. Bradshaw sighed.  &quot;It&#39;s a pity you are so far apart,&quot; she said.

&quot;It&#39;s not for long,&quot; said Mr. Kemp.  &quot;I&#39;m just going back for about a
year to wind up things out there, and then I&#39;m coming back to leave my
old bones over here.  George has very kindly offered to let me live with
him.&quot;

&quot;He won&#39;t suffer for it, I&#39;ll be bound,&quot; said Mrs. Bradshaw, archly.

&quot;So far as money goes he won&#39;t,&quot; said the old man.  &quot;Not that that would
make any difference to George.&quot;

&quot;It would be the same to me if you hadn&#39;t got a farthing,&quot; said Mr.
Wright, promptly.

[Illustration: &quot;It&#39;ll do to go on with,&quot; he said]

Mr. Kemp, somewhat affected, shook hands with him, and leaning back in
the most comfortable chair in the room, described his life and struggles
in New Zealand.  Hard work, teetotalism, and the simple life combined
appeared to be responsible for a fortune which he affected to be too old
to enjoy.  Misunderstandings of a painful nature were avoided by a timely
admission that under medical advice he was now taking a fair amount of
stimulant.

[Illustration: &quot;&#39;Ow much did you say you&#39;d got in the bank?&quot;]

&quot;Mind,&quot; he said, as he walked home with the elated George, &quot;it&#39;s your
game, not mine, and it&#39;s sure to come a bit expensive.  I can&#39;t be a rich
uncle without spending a bit.  &#39;Ow much did you say you&#39;d got in the
bank?&quot;

&quot;We must be as careful as we can,&quot; said Mr. Wright, hastily.  &quot;One thing
is they can&#39;t leave the shop to go out much.  It&#39;s a very good little
business, and it ought to be all right for me and Bella one of these
days, eh?&quot;

Mr. Kemp, prompted by a nudge in the ribs, assented.  &quot;It&#39;s wonderful how
they took it all in about me,&quot; he said; &quot;but I feel certain in my own
mind that I ought to chuck some money about.&quot;

&quot;Tell &#39;em of the money you have chucked about,&quot; said Mr. Wright.  &quot;It&#39;ll
do just as well, and come a good deal cheaper.  And you had better go
round alone to-morrow evening.  It&#39;ll look better.  Just go in for
another one of their sixpenny cigars.&quot;

Mr. Kemp obeyed, and the following evening, after sitting a little while
chatting in the shop, was invited into the parlour, where, mindful of Mr.
Wright&#39;s instructions, he held his listeners enthralled by tales of past
expenditure.  A tip of fifty pounds to his bedroom steward coming over
was characterized by Mrs. Bradshaw as extravagant.

&quot;Seems to be going all right,&quot; said Mr. Wright, as the old man made his
report; &quot;but be careful; don&#39;t go overdoing it.&quot;

Mr. Kemp nodded.  &quot;I can turn &#39;em round my little finger,&quot; he said.
&quot;You&#39;ll have Bella all to yourself to-morrow evening.&quot;

Mr. Wright flushed.  &quot;How did you manage that?&quot;  he inquired.  &quot;It&#39;s the
first time she has ever been out with me alone.&quot;

&quot;She ain&#39;t coming out,&quot; said Mr. Kemp.  &quot;She&#39;s going to stay at home and
mind the shop; it&#39;s the mother what&#39;s coming out.  Going to spend the
evening with me!&quot;

Mr. Wright frowned.  &quot;What did you do that for?&quot;  he demanded, hotly.

&quot;I didn&#39;t do it,&quot; said Mr. Kemp, equably; &quot;they done it.  The old lady
says that, just for once in her life, she wants to see how it feels to
spend money like water.&quot;

&quot;&lt;i&gt;Money like water!&lt;/i&gt;&quot;  repeated the horrified Mr. Wright.  &quot;Money like--
I&#39;ll &#39;money&#39; her--I&#39;ll----&quot;

&quot;It don&#39;t matter to me,&quot; said Mr. Kemp.  &quot;I can have a headache or a
chill, or something of that sort, if you like.  I don&#39;t want to go.  It&#39;s
no pleasure to me.&quot;

&quot;What will it cost?&quot;  demanded Mr. Wright, pacing up and down the room.

The rich uncle made a calculation.  &quot;She wants to go to a place called
the Empire,&quot; he said, slowly, &quot;and have something for supper, and there&#39;d
be cabs and things.  I dessay it would cost a couple o&#39; pounds, and it
might be more.  But I&#39;d just as soon ave&#39; a chill--just.&quot;

Mr. Wright groaned, and after talking of Mrs. Bradshaw as though she were
already his mother-in-law, produced the money.  His instructions as to
economy lasted almost up to the moment when he stood with Bella outside
the shop on the following evening and watched the couple go off.

&quot;It&#39;s wonderful how well they get on together,&quot; said Bella, as they
re-entered the shop and passed into the parlour.  &quot;I&#39;ve never seen mother
take to anybody so quick as she has to him.&quot;

&quot;I hope you like him, too,&quot; said Mr. Wright.

&quot;He&#39;s a dear,&quot; said Bella.  &quot;Fancy having all that money.  I wonder what
it feels like?&quot;

&quot;I suppose I shall know some day,&quot; said the young man, slowly; &quot;but it
won&#39;t be much good to me unless----&quot;

&quot;Unless?&quot;  said Bella, after a pause.

&quot;Unless it gives me what I want,&quot; replied the other.  &quot;I&#39;d sooner be a
poor man and married to the girl I love, than a millionaire.&quot;

Miss Bradshaw stole an uneasy glance at his somewhat sallow features, and
became thoughtful.

&quot;It&#39;s no good having diamonds and motor-cars and that sort of thing
unless you have somebody to share them with,&quot; pursued Mr. Wright.

Miss Bradshaw&#39;s eyes sparkled, and at that moment the shop-bell tinkled
and a lively whistle sounded.  She rose and went into the shop, and Mr.
Wright settled back in his chair and scowled darkly as he saw the
intruder.

&quot;Good evening,&quot; said the latter.  &quot;I want a sixpenny smoke for twopence,
please.  How are we this evening?  Sitting up and taking nourishment?&quot;

Miss Bradshaw told him to behave himself.

&quot;Always do,&quot; said the young man.  &quot;That&#39;s why I can never get anybody to
play with.  I had such an awful dream about you last night that I
couldn&#39;t rest till I saw you.  Awful it was.&quot;

&quot;What was it?&quot;  inquired Miss Bradshaw.

&quot;Dreamt you were married,&quot; said Mr. Hills, smiling at her.

Miss Bradshaw tossed her head.  &quot;Who to, pray?&quot;  she inquired.

&quot;Me,&quot; said Mr. Hills, simply.  &quot;I woke up in a cold perspiration.
Halloa! is that Georgie in there?  How are you, George?  Better?&quot;

&quot;I&#39;m all right,&quot; said Mr. Wright, with dignity, as the other hooked the
door open with his stick and nodded at him.

&quot;Well, why don&#39;t you look it?&quot;  demanded the lively Mr. Hills.  &quot;Have you
got your feet wet, or what?&quot;

&quot;Oh, be quiet,&quot; said Miss Bradshaw, smiling at him.

&quot;Right-o,&quot; said Mr. Hills, dropping into a chair by the counter and
caressing his moustache.  &quot;But you wouldn&#39;t speak to me like that if you
knew what a terrible day I&#39;ve had.&quot;

&quot;What have you been doing?&quot;  asked the girl.

&quot;Working,&quot; said the other, with a huge sigh.  &quot;Where&#39;s the millionaire?
I came round on purpose to have a look at him.&quot;

&quot;Him and mother have gone to the Empire?&quot;  said Miss Bradshaw.

Mr. Hills gave three long, penetrating whistles, and then, placing his
cigar with great care on the counter, hid his face in a huge
handkerchief.  Miss Bradshaw, glanced from him to the frowning Mr.
Wright, and then, entering the parlour, closed the door with a bang.  Mr.
Hills took the hint, and with a somewhat thoughtful grin departed.

He came in next evening for another cigar, and heard all that there was
to hear about the Empire.  Mrs. Bradshaw would have treated him but
coldly, but the innocent Mr. Kemp, charmed by his manner, paid him great
attention.

&quot;He&#39;s just like what I was at his age,&quot; he said.  &quot;Lively.&quot;

&quot;I&#39;m not a patch on you,&quot; said Mr. Hills, edging his way by slow degrees
into the parlour.  &quot;I don&#39;t take young ladies to the Empire.  Were you
telling me you came over here to get married, or did I dream it?&quot;

&quot;&#39;Ark at him,&quot; said the blushing Mr. Kemp, as Mrs. Bradshaw shook her
head at the offender and told him to behave himself.

&quot;He&#39;s a man any woman might be happy with,&quot; said Mr. Hills.  &quot;He never
knows how much there is in his trousers-pocket.  Fancy sewing on buttons
for a man like that.  Gold-mining ain&#39;t in it.&quot;

Mrs. Bradshaw shook her head at him again, and Mr. Hills, after
apologizing to her for revealing her innermost thoughts before the most
guileless of men, began to question Mr. Kemp as to the prospects of a
bright and energetic young man, with a distaste for work, in New Zealand.
The audience listened with keen attention to the replies, the only
disturbing factor being a cough of Mr. Wright&#39;s, which became more and
more troublesome as the evening wore on.  By the time uncle and nephew
rose to depart the latter was so hoarse that he could scarcely speak.

&quot;Why didn&#39;t you tell &#39;em you had got a letter calling you home, as I told
you?&quot;  he vociferated, as soon as they were clear of the shop.

&quot;I--I forgot it,&quot; said the old man.

&quot;Forgot it!&quot;  repeated the incensed Mr. Wright.

&quot;What did you think I was coughing like that for--fun?&quot;

&quot;I forgot it,&quot; said the old man, doggedly.  &quot;Besides, if you take my
advice, you&#39;d better let me stay a little longer to make sure of things.&quot;

Mr. Wright laughed disagreeably.  &quot;I dare say,&quot; he said; &quot;but I am
managing this affair, not you.  Now, you go round to-morrow afternoon and
tell them you&#39;re off.  D&#39;ye hear?  D&#39;ye think I&#39;m made of money?  And
what do you mean by making such a fuss of that fool, Charlie Hills?  You
know he is after Bella.&quot;

He walked the rest of the way home in indignant silence, and, after
giving minute instructions to Mr. Kemp next morning at breakfast, went
off to work in a more cheerful frame of mind.  Mr. Kemp was out when he
returned, and after making his toilet he followed him to Mrs. Bradshaw&#39;s.

To his annoyance, he found Mr. Hills there again; and, moreover, it soon
became clear to him that Mr. Kemp had said nothing about his approaching
departure.  Coughs and scowls passed unheeded, and at last in a
hesitating voice, he broached the subject himself.  There was a general
chorus of lamentation.

&quot;I hadn&#39;t got the heart to tell you,&quot; said Mr. Kemp.  &quot;I don&#39;t know when
I&#39;ve been so happy.&quot;

&quot;But you haven&#39;t got to go back immediate,&quot; said Mrs. Bradshaw.

&quot;To-morrow,&quot; said Mr. Wright, before the old man could reply.
&quot;Business.&quot;

&quot;Must you go,&quot; said Mrs. Bradshaw.

Mr. Kemp smiled feebly.  &quot;I suppose I ought to,&quot; he replied, in a
hesitating voice.

&quot;Take my tip and give yourself a bit of a holiday before you go back,&quot;
urged Mr. Hills.

&quot;Just for a few days,&quot; pleaded Bella.

&quot;To please us,&quot; said Mrs. Bradshaw.  &quot;Think &#39;ow George&#39;ll miss you.&quot;

&quot;Lay hold of him and don&#39;t let him go,&quot; said Mr. Hills.

He took Mr. Kemp round the waist, and the laughing Bella and her mother
each secured an arm.  An appeal to Mr. Wright to secure his legs passed
unheeded.

&quot;We don&#39;t let you go till you promise,&quot; said Mrs. Bradshaw.

Mr. Kemp smiled and shook his head.  &quot;Promise?&quot;  said Bella.

&quot;Well, well,&quot; said Mr. Kemp; &quot;p&#39;r&#39;aps--&quot;

&quot;He must go back,&quot; shouted the alarmed  Mr. Wright.

&quot;Let him speak for himself,&quot; exclaimed Bella, indignantly.

&quot;Just another week then,&quot; said Mr. Kemp.  &quot;It&#39;s no good having money if I
can&#39;t please myself.&quot;

&quot;A week!&quot; shouted Mr. Wright, almost beside himself with rage and dismay.
&quot;A week!  Another week!  Why, you told me----&quot;

&quot;Oh, don&#39;t listen to him,&quot; said Mrs. Bradshaw.  &quot;Croaker!  It&#39;s his own
business, ain&#39;t it?  And he knows best, don&#39;t he?  What&#39;s it got to do
with you?&quot;

She patted Mr. Kemp&#39;s hand; Mr. Kemp patted back, and with his disengaged
hand helped himself to a glass of beer--the fourth--and beamed in a
friendly fashion upon the company.

&quot;George!&quot;  he said, suddenly.

&quot;Yes,&quot; said Mr. Wright, in a harsh voice.

&quot;Did you think to bring my pocket-book along with you?&quot;

&quot;No,&quot; said Mr. Wright, sharply; &quot;I didn&#39;t.&quot;

&quot;Tt-tt,&quot; said the old man, with a gesture of annoyance.  &quot;Well, lend me a
couple of pounds, then, or else run back and fetch my pocket-book,&quot; he
added, with a sly grin.

Mr. Wright&#39;s face worked with impotent fury.  &quot;What--what--do you--want
it for?&quot;  he gasped.

Mrs. Bradshaw&#39;s &quot;Well! Well!&quot; seemed to sum up the general feeling; Mr.
Kemp, shaking his head, eyed him with gentle reproach.

&quot;Me and Mrs. Bradshaw are going to gave another evening out,&quot; he said,
quietly.  &quot;I&#39;ve only got a few more days, and I must make hay while the
sun shines.&quot;

To Mr. Wright the room seemed to revolve slowly on its axis, but,
regaining his self-possession by a supreme effort, he took out his purse
and produced the amount.  Mrs. Bradshaw, after a few feminine
protestations, went upstairs to put her bonnet on.

&quot;And you can go and fetch a hansom-cab, George, while she&#39;s a-doing of
it,&quot; said Mr. Kemp.  &quot;Pick out a good &#39;orse--spotted-grey, if you can.&quot;

Mr. Wright arose and, departing with a suddenness that was almost
startling, exploded harmlessly in front of the barber&#39;s, next door but
one.  Then with lagging steps he went in search of the shabbiest cab and
oldest horse he could find.

&quot;Thankee, my boy,&quot; said Mr. Kemp, bluffly, as he helped Mrs. Bradshaw in
and stood with his foot on the step.  &quot;By the way, you had better go back
and lock my pocket-book up.  I left it on the washstand, and there&#39;s best
part of a thousand pounds in it.  You can take fifty for yourself to buy
smokes with.&quot;

There was a murmur of admiration, and Mr. Wright, with a frantic attempt
to keep up appearances, tried to thank him, but in vain.  Long after the
cab had rolled away he stood on the pavement trying to think out a
position which was rapidly becoming unendurable.  Still keeping up
appearances, he had to pretend to go home to look after the pocket-book,
leaving the jubilant Mr. Hills to improve the shining hour with Miss
Bradshaw.

Mr. Kemp, returning home at midnight--in a cab--found the young man
waiting up for him, and, taking a seat on the edge of the table, listened
unmoved to a word-picture of himself which seemed interminable.  He was
only moved to speech when Mr. Wright described him as a white-whiskered
jezebel who was a disgrace to his sex, and then merely in the interests
of natural science.

&quot;Don&#39;t you worry,&quot; he said, as the other paused from exhaustion.  &quot;It
won&#39;t be for long now.&quot;

&quot;Long?&quot;  said Mr. Wright, panting.  &quot;First thing to-morrow morning you
have a telegram calling you back--a telegram that must be minded.  D&#39;ye
see?&quot;

&quot;No, I don&#39;t,&quot; said Mr. Kemp, plainly.  &quot;I&#39;m not going back, never no
more--never!  I&#39;m going to stop here and court Mrs. Bradshaw.&quot;

Mr. Wright fought for breath.  &quot;You--you can&#39;t!&quot; he gasped.

&quot;I&#39;m going to have a try,&quot; said the old man.  &quot;I&#39;m sick of going to sea,
and it&#39;ll be a nice comfortable home for my old age.  You marry Bella,
and I&#39;ll marry her mother.  Happy family!&quot;

Mr. Wright, trembling with rage, sat down to recover, and, regaining his
composure after a time, pointed out almost calmly the various
difficulties in the way.

&quot;I&#39;ve thought it all out,&quot; said Mr. Kemp, nodding.  &quot;She mustn&#39;t know I&#39;m
not rich till after we&#39;re married; then I &#39;ave a letter from New Zealand
saying I&#39;ve lost all my money.  It&#39;s just as easy to have that letter as
the one you spoke of.&quot;

&quot;And I&#39;m to find you money to play the rich uncle with till you&#39;re
married, I suppose,&quot; said Mr. Wright, in a grating voice, &quot;and then lose
Bella when Mrs. Bradshaw finds you&#39;ve lost your money?&quot;

Mr. Kemp scratched his ear.  &quot;That&#39;s your lookout,&quot; he said, at last.

&quot;Now, look here,&quot; said Mr. Wright, with great determination.  &quot;Either you
go and tell them that you&#39;ve been telegraphed for--cabled is the proper
word--or I tell them the truth.&quot;

&quot;That&#39;ll settle you then,&quot; said Mr. Kemp.

&quot;No more than the other would,&quot; retorted the young man, &quot;and it&#39;ll come
cheaper.  One thing I&#39;ll take my oath of, and that is I won&#39;t give you
another farthing; but if you do as I tell you I&#39;ll give you a quid for
luck.  Now, think it over.&quot;

Mr. Kemp thought it over, and after a vain attempt to raise the promised
reward to five pounds, finally compounded for two, and went off to bed
after a few stormy words on selfishness and ingratitude.  He declined to
speak to his host at breakfast next morning, and accompanied him in the
evening with the air of a martyr going to the stake.  He listened in
stony silence to the young man&#39;s instructions, and only spoke when the
latter refused to pay the two pounds in advance.

The news, communicated in halting accents by Mr. Kemp, was received with
flattering dismay.  Mrs. Bradshaw refused to believe her ears, and it was
only after the information had been repeated and confirmed by Mr. Wright
that she understood.

&quot;I must go,&quot; said Mr. Kemp.  &quot;I&#39;ve spent over eleven pounds cabling
to-day; but it&#39;s all no good.&quot;

&quot;But you&#39;re coming back?&quot;  said Mr. Hills.

&quot;O&#39; course I am,&quot; was the reply.  &quot;George is the only relation I&#39;ve got,
and I&#39;ve got to look after him, I suppose.  After all, blood is thicker
than water.&quot;

&quot;Hear, hear!&quot; said Mrs. Bradshaw, piously.

&quot;And there&#39;s you and Bella,&quot; continued Mr. Kemp; &quot;two of the best that
ever breathed.&quot;

The ladies looked down.

&quot;And Charlie Hills; I don&#39;t know--I don&#39;t know &lt;i&gt;when&lt;/i&gt; I&#39;ve took such a
fancy to anybody as I have to &#39;im.  If I was a young gal--a single young
gal--he&#39;s--the other half,&quot; he said, slowly, as he paused--&quot;just the one I
should fancy.  He&#39;s a good-&#39;arted, good-looking----&quot;

&quot;Draw it mild,&quot; interrupted the blushing Mr. Hills as Mr. Wright bestowed
a ferocious glance upon the speaker.

&quot;Clever, lively young fellow,&quot; concluded Mr. Kemp.  &quot;George!&quot;

&quot;Yes,&quot; said Mr. Wright.

&quot;I&#39;m going now.  I&#39;ve got to catch the train for Southampton, but I don&#39;t
want you to come with me.  I prefer to be alone.  You stay here and cheer
them up.  Oh, and before I forget it, lend me a couple o&#39; pounds out o&#39;
that fifty I gave you last night.  I&#39;ve given all my small change away.&quot;

He looked up and met Mr. Wright&#39;s eye; the latter, too affected to speak,
took out the money and passed it over.

&quot;We never know what may happen to us,&quot; said the old man, solemnly, as he
rose and buttoned his coat.  &quot;I&#39;m an old man and I like to have things
ship-shape.  I&#39;ve spent nearly the whole day with my lawyer, and if
anything &#39;appens to my old carcass it won&#39;t make any difference.  I have
left half my money to George; half of all I have is to be his.&quot;

In the midst of an awed silence he went round and shook hands.

&quot;The other half,&quot; with his hand on the door--&quot;the other half and my best
gold watch and chain I have left to my dear young pal, Charlie Hills.
Good-bye, Georgie!&quot;





End of the Project Gutenberg EBook of The Old Man of the Sea, by W.W. Jacobs

*** END OF THIS PROJECT GUTENBERG EBOOK THE OLD MAN OF THE SEA ***

***** This file should be named 10571.txt or 10571.zip *****
This and all associated files of various formats will be found in:
        http://www.gutenberg.net/1/0/5/7/10571/

Produced by David Widger

Updated editions will replace the previous one--the old editions
will be renamed.

Creating the works from public domain print editions means that no
one owns a United States copyright in these works, so the Foundation
(and you!) can copy and distribute it in the United States without
permission and without paying copyright royalties.  Special rules,
set forth in the General Terms of Use part of this license, apply to
copying and distributing Project Gutenberg-tm electronic works to
protect the PROJECT GUTENBERG-tm concept and trademark.  Project
Gutenberg is a registered trademark, and may not be used if you
charge for the eBooks, unless you receive specific permission.  If you
do not charge anything for copies of this eBook, complying with the
rules is very easy.  You may use this eBook for nearly any purpose
such as creation of derivative works, reports, performances and
research.  They may be modified and printed and given away--you may do
practically ANYTHING with public domain eBooks.  Redistribution is
subject to the trademark license, especially commercial
redistribution.



*** START: FULL LICENSE ***

THE FULL PROJECT GUTENBERG LICENSE
PLEASE READ THIS BEFORE YOU DISTRIBUTE OR USE THIS WORK

To protect the Project Gutenberg-tm mission of promoting the free
distribution of electronic works, by using or distributing this work
(or any other work associated in any way with the phrase &quot;Project
Gutenberg&quot;), you agree to comply with all the terms of the Full Project
Gutenberg-tm License (available with this file or online at
http://gutenberg.net/license).


Section 1.  General Terms of Use and Redistributing Project Gutenberg-tm
electronic works

1.A.  By reading or using any part of this Project Gutenberg-tm
electronic work, you indicate that you have read, understand, agree to
and accept all the terms of this license and intellectual property
(trademark/copyright) agreement.  If you do not agree to abide by all
the terms of this agreement, you must cease using and return or destroy
all copies of Project Gutenberg-tm electronic works in your possession.
If you paid a fee for obtaining a copy of or access to a Project
Gutenberg-tm electronic work and you do not agree to be bound by the
terms of this agreement, you may obtain a refund from the person or
entity to whom you paid the fee as set forth in paragraph 1.E.8.

1.B.  &quot;Project Gutenberg&quot; is a registered trademark.  It may only be
used on or associated in any way with an electronic work by people who
agree to be bound by the terms of this agreement.  There are a few
things that you can do with most Project Gutenberg-tm electronic works
even without complying with the full terms of this agreement.  See
paragraph 1.C below.  There are a lot of things you can do with Project
Gutenberg-tm electronic works if you follow the terms of this agreement
and help preserve free future access to Project Gutenberg-tm electronic
works.  See paragraph 1.E below.

1.C.  The Project Gutenberg Literary Archive Foundation (&quot;the Foundation&quot;
or PGLAF), owns a compilation copyright in the collection of Project
Gutenberg-tm electronic works.  Nearly all the individual works in the
collection are in the public domain in the United States.  If an
individual work is in the public domain in the United States and you are
located in the United States, we do not claim a right to prevent you from
copying, distributing, performing, displaying or creating derivative
works based on the work as long as all references to Project Gutenberg
are removed.  Of course, we hope that you will support the Project
Gutenberg-tm mission of promoting free access to electronic works by
freely sharing Project Gutenberg-tm works in compliance with the terms of
this agreement for keeping the Project Gutenberg-tm name associated with
the work.  You can easily comply with the terms of this agreement by
keeping this work in the same format with its attached full Project
Gutenberg-tm License when you share it without charge with others.

1.D.  The copyright laws of the place where you are located also govern
what you can do with this work.  Copyright laws in most countries are in
a constant state of change.  If you are outside the United States, check
the laws of your country in addition to the terms of this agreement
before downloading, copying, displaying, performing, distributing or
creating derivative works based on this work or any other Project
Gutenberg-tm work.  The Foundation makes no representations concerning
the copyright status of any work in any country outside the United
States.

1.E.  Unless you have removed all references to Project Gutenberg:

1.E.1.  The following sentence, with active links to, or other immediate
access to, the full Project Gutenberg-tm License must appear prominently
whenever any copy of a Project Gutenberg-tm work (any work on which the
phrase &quot;Project Gutenberg&quot; appears, or with which the phrase &quot;Project
Gutenberg&quot; is associated) is accessed, displayed, performed, viewed,
copied or distributed:

This eBook is for the use of anyone anywhere at no cost and with
almost no restrictions whatsoever.  You may copy it, give it away or
re-use it under the terms of the Project Gutenberg License included
with this eBook or online at www.gutenberg.net

1.E.2.  If an individual Project Gutenberg-tm electronic work is derived
from the public domain (does not contain a notice indicating that it is
posted with permission of the copyright holder), the work can be copied
and distributed to anyone in the United States without paying any fees
or charges.  If you are redistributing or providing access to a work
with the phrase &quot;Project Gutenberg&quot; associated with or appearing on the
work, you must comply either with the requirements of paragraphs 1.E.1
through 1.E.7 or obtain permission for the use of the work and the
Project Gutenberg-tm trademark as set forth in paragraphs 1.E.8 or
1.E.9.

1.E.3.  If an individual Project Gutenberg-tm electronic work is posted
with the permission of the copyright holder, your use and distribution
must comply with both paragraphs 1.E.1 through 1.E.7 and any additional
terms imposed by the copyright holder.  Additional terms will be linked
to the Project Gutenberg-tm License for all works posted with the
permission of the copyright holder found at the beginning of this work.

1.E.4.  Do not unlink or detach or remove the full Project Gutenberg-tm
License terms from this work, or any files containing a part of this
work or any other work associated with Project Gutenberg-tm.

1.E.5.  Do not copy, display, perform, distribute or redistribute this
electronic work, or any part of this electronic work, without
prominently displaying the sentence set forth in paragraph 1.E.1 with
active links or immediate access to the full terms of the Project
Gutenberg-tm License.

1.E.6.  You may convert to and distribute this work in any binary,
compressed, marked up, nonproprietary or proprietary form, including any
word processing or hypertext form.  However, if you provide access to or
distribute copies of a Project Gutenberg-tm work in a format other than
&quot;Plain Vanilla ASCII&quot; or other format used in the official version
posted on the official Project Gutenberg-tm web site (www.gutenberg.net),
you must, at no additional cost, fee or expense to the user, provide a
copy, a means of exporting a copy, or a means of obtaining a copy upon
request, of the work in its original &quot;Plain Vanilla ASCII&quot; or other
form.  Any alternate format must include the full Project Gutenberg-tm
License as specified in paragraph 1.E.1.

1.E.7.  Do not charge a fee for access to, viewing, displaying,
performing, copying or distributing any Project Gutenberg-tm works
unless you comply with paragraph 1.E.8 or 1.E.9.

1.E.8.  You may charge a reasonable fee for copies of or providing
access to or distributing Project Gutenberg-tm electronic works provided
that

- You pay a royalty fee of 20% of the gross profits you derive from
     the use of Project Gutenberg-tm works calculated using the method
     you already use to calculate your applicable taxes.  The fee is
     owed to the owner of the Project Gutenberg-tm trademark, but he
     has agreed to donate royalties under this paragraph to the
     Project Gutenberg Literary Archive Foundation.  Royalty payments
     must be paid within 60 days following each date on which you
     prepare (or are legally required to prepare) your periodic tax
     returns.  Royalty payments should be clearly marked as such and
     sent to the Project Gutenberg Literary Archive Foundation at the
     address specified in Section 4, &quot;Information about donations to
     the Project Gutenberg Literary Archive Foundation.&quot;

- You provide a full refund of any money paid by a user who notifies
     you in writing (or by e-mail) within 30 days of receipt that s/he
     does not agree to the terms of the full Project Gutenberg-tm
     License.  You must require such a user to return or
     destroy all copies of the works possessed in a physical medium
     and discontinue all use of and all access to other copies of
     Project Gutenberg-tm works.

- You provide, in accordance with paragraph 1.F.3, a full refund of any
     money paid for a work or a replacement copy, if a defect in the
     electronic work is discovered and reported to you within 90 days
     of receipt of the work.

- You comply with all other terms of this agreement for free
     distribution of Project Gutenberg-tm works.

1.E.9.  If you wish to charge a fee or distribute a Project Gutenberg-tm
electronic work or group of works on different terms than are set
forth in this agreement, you must obtain permission in writing from
both the Project Gutenberg Literary Archive Foundation and Michael
Hart, the owner of the Project Gutenberg-tm trademark.  Contact the
Foundation as set forth in Section 3 below.

1.F.

1.F.1.  Project Gutenberg volunteers and employees expend considerable
effort to identify, do copyright research on, transcribe and proofread
public domain works in creating the Project Gutenberg-tm
collection.  Despite these efforts, Project Gutenberg-tm electronic
works, and the medium on which they may be stored, may contain
&quot;Defects,&quot; such as, but not limited to, incomplete, inaccurate or
corrupt data, transcription errors, a copyright or other intellectual
property infringement, a defective or damaged disk or other medium, a
computer virus, or computer codes that damage or cannot be read by
your equipment.

1.F.2.  LIMITED WARRANTY, DISCLAIMER OF DAMAGES - Except for the &quot;Right
of Replacement or Refund&quot; described in paragraph 1.F.3, the Project
Gutenberg Literary Archive Foundation, the owner of the Project
Gutenberg-tm trademark, and any other party distributing a Project
Gutenberg-tm electronic work under this agreement, disclaim all
liability to you for damages, costs and expenses, including legal
fees.  YOU AGREE THAT YOU HAVE NO REMEDIES FOR NEGLIGENCE, STRICT
LIABILITY, BREACH OF WARRANTY OR BREACH OF CONTRACT EXCEPT THOSE
PROVIDED IN PARAGRAPH F3.  YOU AGREE THAT THE FOUNDATION, THE
TRADEMARK OWNER, AND ANY DISTRIBUTOR UNDER THIS AGREEMENT WILL NOT BE
LIABLE TO YOU FOR ACTUAL, DIRECT, INDIRECT, CONSEQUENTIAL, PUNITIVE OR
INCIDENTAL DAMAGES EVEN IF YOU GIVE NOTICE OF THE POSSIBILITY OF SUCH
DAMAGE.

1.F.3.  LIMITED RIGHT OF REPLACEMENT OR REFUND - If you discover a
defect in this electronic work within 90 days of receiving it, you can
receive a refund of the money (if any) you paid for it by sending a
written explanation to the person you received the work from.  If you
received the work on a physical medium, you must return the medium with
your written explanation.  The person or entity that provided you with
the defective work may elect to provide a replacement copy in lieu of a
refund.  If you received the work electronically, the person or entity
providing it to you may choose to give you a second opportunity to
receive the work electronically in lieu of a refund.  If the second copy
is also defective, you may demand a refund in writing without further
opportunities to fix the problem.

1.F.4.  Except for the limited right of replacement or refund set forth
in paragraph 1.F.3, this work is provided to you &#39;AS-IS,&quot; WITH NO OTHER
WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO
WARRANTIES OF MERCHANTIBILITY OR FITNESS FOR ANY PURPOSE.

1.F.5.  Some states do not allow disclaimers of certain implied
warranties or the exclusion or limitation of certain types of damages.
If any disclaimer or limitation set forth in this agreement violates the
law of the state applicable to this agreement, the agreement shall be
interpreted to make the maximum disclaimer or limitation permitted by
the applicable state law.  The invalidity or unenforceability of any
provision of this agreement shall not void the remaining provisions.

1.F.6.  INDEMNITY - You agree to indemnify and hold the Foundation, the
trademark owner, any agent or employee of the Foundation, anyone
providing copies of Project Gutenberg-tm electronic works in accordance
with this agreement, and any volunteers associated with the production,
promotion and distribution of Project Gutenberg-tm electronic works,
harmless from all liability, costs and expenses, including legal fees,
that arise directly or indirectly from any of the following which you do
or cause to occur: (a) distribution of this or any Project Gutenberg-tm
work, (b) alteration, modification, or additions or deletions to any
Project Gutenberg-tm work, and (c) any Defect you cause.


Section  2.  Information about the Mission of Project Gutenberg-tm

Project Gutenberg-tm is synonymous with the free distribution of
electronic works in formats readable by the widest variety of computers
including obsolete, old, middle-aged and new computers.  It exists
because of the efforts of hundreds of volunteers and donations from
people in all walks of life.

Volunteers and financial support to provide volunteers with the
assistance they need, is critical to reaching Project Gutenberg-tm&#39;s
goals and ensuring that the Project Gutenberg-tm collection will
remain freely available for generations to come.  In 2001, the Project
Gutenberg Literary Archive Foundation was created to provide a secure
and permanent future for Project Gutenberg-tm and future generations.
To learn more about the Project Gutenberg Literary Archive Foundation
and how your efforts and donations can help, see Sections 3 and 4
and the Foundation web page at http://www.pglaf.org.


Section 3.  Information about the Project Gutenberg Literary Archive
Foundation

The Project Gutenberg Literary Archive Foundation is a non profit
501(c)(3) educational corporation organized under the laws of the
state of Mississippi and granted tax exempt status by the Internal
Revenue Service.  The Foundation&#39;s EIN or federal tax identification
number is 64-6221541.  Its 501(c)(3) letter is posted at
http://pglaf.org/fundraising.  Contributions to the Project Gutenberg
Literary Archive Foundation are tax deductible to the full extent
permitted by U.S. federal laws and your state&#39;s laws.

The Foundation&#39;s principal office is located at 4557 Melan Dr. S.
Fairbanks, AK, 99712., but its volunteers and employees are scattered
throughout numerous locations.  Its business office is located at
809 North 1500 West, Salt Lake City, UT 84116, (801) 596-1887, email
business@pglaf.org.  Email contact links and up to date contact
information can be found at the Foundation&#39;s web site and official
page at http://pglaf.org

For additional contact information:
     Dr. Gregory B. Newby
     Chief Executive and Director
     gbnewby@pglaf.org

Section 4.  Information about Donations to the Project Gutenberg
Literary Archive Foundation

Project Gutenberg-tm depends upon and cannot survive without wide
spread public support and donations to carry out its mission of
increasing the number of public domain and licensed works that can be
freely distributed in machine readable form accessible by the widest
array of equipment including outdated equipment.  Many small donations
($1 to $5,000) are particularly important to maintaining tax exempt
status with the IRS.

The Foundation is committed to complying with the laws regulating
charities and charitable donations in all 50 states of the United
States.  Compliance requirements are not uniform and it takes a
considerable effort, much paperwork and many fees to meet and keep up
with these requirements.  We do not solicit donations in locations
where we have not received written confirmation of compliance.  To
SEND DONATIONS or determine the status of compliance for any
particular state visit http://pglaf.org

While we cannot and do not solicit contributions from states where we
have not met the solicitation requirements, we know of no prohibition
against accepting unsolicited donations from donors in such states who
approach us with offers to donate.

International donations are gratefully accepted, but we cannot make
any statements concerning tax treatment of donations received from
outside the United States.  U.S. laws alone swamp our small staff.

Please check the Project Gutenberg Web pages for current donation
methods and addresses.  Donations are accepted in a number of other
ways including including checks, online payments and credit card
donations.  To donate, please visit: http://pglaf.org/donate


Section 5.  General Information About Project Gutenberg-tm electronic
works.

Professor Michael S. Hart is the originator of the Project Gutenberg-tm
concept of a library of electronic works that could be freely shared
with anyone.  For thirty years, he produced and distributed Project
Gutenberg-tm eBooks with only a loose network of volunteer support.

Project Gutenberg-tm eBooks are often created from several printed
editions, all of which are confirmed as Public Domain in the U.S.
unless a copyright notice is included.  Thus, we do not necessarily
keep eBooks in compliance with any particular paper edition.

Each eBook is in a subdirectory of the same number as the eBook&#39;s
eBook number, often in several formats including plain vanilla ASCII,
compressed (zipped), HTML and others.

Corrected EDITIONS of our eBooks replace the old file and take over
the old filename and etext number.  The replaced older file is renamed.
VERSIONS based on separate sources are treated as new eBooks receiving
new filenames and etext numbers.

Most people start at our Web site which has the main PG search facility:

     http://www.gutenberg.net

This Web site includes information about Project Gutenberg-tm,
including how to make donations to the Project Gutenberg Literary
Archive Foundation, how to help produce our new eBooks, and how to
subscribe to our email newsletter to hear about new eBooks.

EBooks posted prior to November 2003, with eBook numbers BELOW #10000,
are filed in directories based on their release date.  If you want to
download any of these eBooks directly, rather than using the regular
search system you may utilize the following addresses and just
download by the etext year.

     http://www.gutenberg.net/etext06

    (Or /etext 05, 04, 03, 02, 01, 00, 99,
     98, 97, 96, 95, 94, 93, 92, 92, 91 or 90)

EBooks posted since November 2003, with etext numbers OVER #10000, are
filed in a different way.  The year of a release date is no longer part
of the directory path.  The path is based on the etext number (which is
identical to the filename).  The path to the file is made up of single
digits corresponding to all but the last digit in the filename.  For
example an eBook of filename 10234 would be found at:

     http://www.gutenberg.net/1/0/2/3/10234

or filename 24689 would be found at:
     http://www.gutenberg.net/2/4/6/8/24689

An alternative method of locating eBooks:
     http://www.gutenberg.net/GUTINDEX.ALL
</pre></div>
</div>
</div>
</div>
<section id="natural-language-sql-queries">
<h3>Natural Language SQL Queries<a class="headerlink" href="#natural-language-sql-queries" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">create_engine</span>
   <span class="p">,</span><span class="n">MetaData</span>
   <span class="p">,</span><span class="n">Table</span>
   <span class="p">,</span><span class="n">Column</span>
   <span class="p">,</span><span class="n">String</span>
   <span class="p">,</span><span class="n">Integer</span>
   <span class="p">,</span><span class="n">select</span>
<span class="p">)</span>


<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite:///:memory:&quot;</span><span class="p">)</span>
<span class="n">metadata_obj</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">()</span>

<span class="n">table_name</span> <span class="o">=</span> <span class="s2">&quot;cricket_batsmen_stats&quot;</span>

<span class="n">batsment_stats_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="n">table_name</span>
   <span class="p">,</span><span class="n">metadata_obj</span>
   <span class="p">,</span><span class="n">Column</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
   <span class="p">,</span><span class="n">Column</span><span class="p">(</span><span class="s2">&quot;matches&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">)</span>
   <span class="p">,</span><span class="n">Column</span><span class="p">(</span><span class="s2">&quot;runs&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">metadata_obj</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">llama_index.readers.web</span> <span class="kn">import</span> <span class="n">SimpleWebPageReader</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>


<span class="n">documents</span> <span class="o">=</span> <span class="n">SimpleWebPageReader</span><span class="p">(</span><span class="n">html_to_text</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span>
    <span class="p">[</span><span class="s2">&quot;https://www.espncricinfo.com/records/most-runs-in-career-83548&quot;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">html_page</span> <span class="o">=</span> <span class="n">documents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_page</span><span class="p">)</span>
<span class="n">tables</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">soup</span><span class="p">))</span>

<span class="n">players_table</span> <span class="o">=</span> <span class="n">tables</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">players_table</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Player</th>
      <th>Span</th>
      <th>Mat</th>
      <th>Inns</th>
      <th>NO</th>
      <th>Runs</th>
      <th>HS</th>
      <th>Ave</th>
      <th>BF</th>
      <th>SR</th>
      <th>100</th>
      <th>50</th>
      <th>0</th>
      <th>4s</th>
      <th>6s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>SR Tendulkar (IND)</td>
      <td>1989-2012</td>
      <td>463</td>
      <td>452</td>
      <td>41</td>
      <td>18426</td>
      <td>200*</td>
      <td>44.83</td>
      <td>21368</td>
      <td>86.23</td>
      <td>49</td>
      <td>96</td>
      <td>20</td>
      <td>2016</td>
      <td>195</td>
    </tr>
    <tr>
      <th>1</th>
      <td>KC Sangakkara (Asia/ICC/SL)</td>
      <td>2000-2015</td>
      <td>404</td>
      <td>380</td>
      <td>41</td>
      <td>14234</td>
      <td>169</td>
      <td>41.98</td>
      <td>18048</td>
      <td>78.86</td>
      <td>25</td>
      <td>93</td>
      <td>15</td>
      <td>1385</td>
      <td>88</td>
    </tr>
    <tr>
      <th>2</th>
      <td>V Kohli (IND)</td>
      <td>2008-2024</td>
      <td>295</td>
      <td>283</td>
      <td>44</td>
      <td>13906</td>
      <td>183</td>
      <td>58.18</td>
      <td>14866</td>
      <td>93.54</td>
      <td>50</td>
      <td>72</td>
      <td>16</td>
      <td>1302</td>
      <td>151</td>
    </tr>
    <tr>
      <th>3</th>
      <td>RT Ponting (AUS/ICC)</td>
      <td>1995-2012</td>
      <td>375</td>
      <td>365</td>
      <td>39</td>
      <td>13704</td>
      <td>164</td>
      <td>42.03</td>
      <td>17046</td>
      <td>80.39</td>
      <td>30</td>
      <td>82</td>
      <td>20</td>
      <td>1231</td>
      <td>162</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ST Jayasuriya (Asia/SL)</td>
      <td>1989-2011</td>
      <td>445</td>
      <td>433</td>
      <td>18</td>
      <td>13430</td>
      <td>189</td>
      <td>32.36</td>
      <td>14725</td>
      <td>91.20</td>
      <td>28</td>
      <td>68</td>
      <td>34</td>
      <td>1500</td>
      <td>270</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">players_table</span> <span class="o">=</span> <span class="n">players_table</span><span class="p">[[</span><span class="s1">&#39;Player&#39;</span><span class="p">,</span><span class="s1">&#39;Mat&#39;</span><span class="p">,</span><span class="s1">&#39;Runs&#39;</span><span class="p">]]</span>
<span class="n">players_table</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;matches&#39;</span><span class="p">,</span><span class="s1">&#39;runs&#39;</span><span class="p">]</span>
<span class="n">players_table</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>matches</th>
      <th>runs</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>SR Tendulkar (IND)</td>
      <td>463</td>
      <td>18426</td>
    </tr>
    <tr>
      <th>1</th>
      <td>KC Sangakkara (Asia/ICC/SL)</td>
      <td>404</td>
      <td>14234</td>
    </tr>
    <tr>
      <th>2</th>
      <td>V Kohli (IND)</td>
      <td>295</td>
      <td>13906</td>
    </tr>
    <tr>
      <th>3</th>
      <td>RT Ponting (AUS/ICC)</td>
      <td>375</td>
      <td>13704</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ST Jayasuriya (Asia/SL)</td>
      <td>445</td>
      <td>13430</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">insert_records</span> <span class="o">=</span> <span class="n">players_table</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">insert</span>

<span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">insert_records</span><span class="p">:</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">batsment_stats_table</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="o">**</span><span class="n">record</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">text</span>

<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">con</span><span class="p">:</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;select name from </span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2"> limit 5&quot;</span><span class="p">))</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;A Flower (ZIM)&#39;,)
(&#39;A Jadeja (IND)&#39;,)
(&#39;A Ranatunga (SL)&#39;,)
(&#39;A Symonds (AUS)&#39;,)
(&#39;AB de Villiers (Afr/SA)&#39;,)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">llama_index.core.query_engine</span> <span class="kn">import</span> <span class="n">NLSQLTableQueryEngine</span>
<span class="kn">from</span> <span class="nn">llama_index.core</span> <span class="kn">import</span> <span class="n">SQLDatabase</span>

<span class="n">sql_database</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="n">include_tables</span><span class="o">=</span><span class="p">[</span><span class="n">table_name</span><span class="p">])</span>
<span class="n">query_engine</span> <span class="o">=</span> <span class="n">NLSQLTableQueryEngine</span><span class="p">(</span>
    <span class="n">sql_database</span><span class="o">=</span><span class="n">sql_database</span><span class="p">,</span> <span class="n">tables</span><span class="o">=</span><span class="p">[</span><span class="n">table_name</span><span class="p">],</span> <span class="n">llm</span><span class="o">=</span><span class="kc">None</span>
<span class="p">)</span>

<span class="n">query_str</span> <span class="o">=</span> <span class="s2">&quot;which batsmen has the most runs?&quot;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">query_engine</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">query_str</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="nn">/usr/local/lib/python3.10/dist-packages/llama_index/core/llms/utils.py</span> in <span class="ni">resolve_llm</span><span class="nt">(llm, callback_manager)</span>
<span class="g g-Whitespace">     </span><span class="mi">41</span>             <span class="n">llm</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">()</span>
<span class="ne">---&gt; </span><span class="mi">42</span>             <span class="n">validate_openai_api_key</span><span class="p">(</span><span class="n">llm</span><span class="o">.</span><span class="n">api_key</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">43</span>         <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>

<span class="nn">/usr/local/lib/python3.10/dist-packages/llama_index/llms/openai/utils.py</span> in <span class="ni">validate_openai_api_key</span><span class="nt">(api_key)</span>
<span class="g g-Whitespace">    </span><span class="mi">409</span>     <span class="k">if</span> <span class="ow">not</span> <span class="n">openai_api_key</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">410</span>         <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">MISSING_API_KEY_ERROR_MESSAGE</span><span class="p">)</span>

<span class="ne">ValueError</span>: No API key found for OpenAI.
<span class="n">Please</span> <span class="nb">set</span> <span class="n">either</span> <span class="n">the</span> <span class="n">OPENAI_API_KEY</span> <span class="n">environment</span> <span class="n">variable</span> <span class="ow">or</span> <span class="n">openai</span><span class="o">.</span><span class="n">api_key</span> <span class="n">prior</span> <span class="n">to</span> <span class="n">initialization</span><span class="o">.</span>
<span class="n">API</span> <span class="n">keys</span> <span class="n">can</span> <span class="n">be</span> <span class="n">found</span> <span class="ow">or</span> <span class="n">created</span> <span class="n">at</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">platform</span><span class="o">.</span><span class="n">openai</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">account</span><span class="o">/</span><span class="n">api</span><span class="o">-</span><span class="n">keys</span>


<span class="n">During</span> <span class="n">handling</span> <span class="n">of</span> <span class="n">the</span> <span class="n">above</span> <span class="n">exception</span><span class="p">,</span> <span class="n">another</span> <span class="n">exception</span> <span class="n">occurred</span><span class="p">:</span>

<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">ipykernel_35102</span><span class="o">/</span><span class="mf">1980035802.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> 
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">sql_database</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="n">include_tables</span><span class="o">=</span><span class="p">[</span><span class="n">table_name</span><span class="p">])</span>
<span class="ne">----&gt; </span><span class="mi">5</span> <span class="n">query_engine</span> <span class="o">=</span> <span class="n">NLSQLTableQueryEngine</span><span class="p">(</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span>     <span class="n">sql_database</span><span class="o">=</span><span class="n">sql_database</span><span class="p">,</span> <span class="n">tables</span><span class="o">=</span><span class="p">[</span><span class="n">table_name</span><span class="p">],</span> <span class="n">llm</span><span class="o">=</span><span class="kc">None</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="p">)</span>

<span class="nn">/usr/local/lib/python3.10/dist-packages/llama_index/core/indices/struct_store/sql_query.py</span> in <span class="ni">__init__</span><span class="nt">(self, sql_database, llm, text_to_sql_prompt, context_query_kwargs, synthesize_response, response_synthesis_prompt, refine_synthesis_prompt, tables, service_context, context_str_prefix, embed_model, sql_only, callback_manager, verbose, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">501</span><span class="w">         </span><span class="sd">&quot;&quot;&quot;Initialize params.&quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">502</span>         <span class="c1"># self._tables = tables</span>
<span class="ne">--&gt; </span><span class="mi">503</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_sql_retriever</span> <span class="o">=</span> <span class="n">NLSQLRetriever</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">504</span>             <span class="n">sql_database</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">505</span>             <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>

<span class="nn">/usr/local/lib/python3.10/dist-packages/llama_index/core/indices/struct_store/sql_retriever.py</span> in <span class="ni">__init__</span><span class="nt">(self, sql_database, text_to_sql_prompt, context_query_kwargs, tables, table_retriever, context_str_prefix, sql_parser_mode, llm, embed_model, service_context, return_raw, handle_sql_errors, sql_only, callback_manager, verbose, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">232</span>         <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">233</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_context_str_prefix</span> <span class="o">=</span> <span class="n">context_str_prefix</span>
<span class="ne">--&gt; </span><span class="mi">234</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_llm</span> <span class="o">=</span> <span class="n">llm</span> <span class="ow">or</span> <span class="n">llm_from_settings_or_context</span><span class="p">(</span><span class="n">Settings</span><span class="p">,</span> <span class="n">service_context</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">235</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_text_to_sql_prompt</span> <span class="o">=</span> <span class="n">text_to_sql_prompt</span> <span class="ow">or</span> <span class="n">DEFAULT_TEXT_TO_SQL_PROMPT</span>
<span class="g g-Whitespace">    </span><span class="mi">236</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_sql_parser_mode</span> <span class="o">=</span> <span class="n">sql_parser_mode</span>

<span class="nn">/usr/local/lib/python3.10/dist-packages/llama_index/core/settings.py</span> in <span class="ni">llm_from_settings_or_context</span><span class="nt">(settings, context)</span>
<span class="g g-Whitespace">    </span><span class="mi">262</span>         <span class="k">return</span> <span class="n">context</span><span class="o">.</span><span class="n">llm</span>
<span class="g g-Whitespace">    </span><span class="mi">263</span> 
<span class="ne">--&gt; </span><span class="mi">264</span>     <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">llm</span>
<span class="g g-Whitespace">    </span><span class="mi">265</span><span class="w"> </span>
<span class="g g-Whitespace">    </span><span class="mi">266</span><span class="w"> </span>

<span class="nn">/usr/local/lib/python3.10/dist-packages/llama_index/core/settings.py</span> in <span class="ni">llm</span><span class="nt">(self)</span>
<span class="g g-Whitespace">     </span><span class="mi">37</span><span class="w">         </span><span class="sd">&quot;&quot;&quot;Get the LLM.&quot;&quot;&quot;</span>
<span class="g g-Whitespace">     </span><span class="mi">38</span>         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_llm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">39</span>             <span class="bp">self</span><span class="o">.</span><span class="n">_llm</span> <span class="o">=</span> <span class="n">resolve_llm</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">40</span> 
<span class="g g-Whitespace">     </span><span class="mi">41</span>         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callback_manager</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

<span class="nn">/usr/local/lib/python3.10/dist-packages/llama_index/core/llms/utils.py</span> in <span class="ni">resolve_llm</span><span class="nt">(llm, callback_manager)</span>
<span class="g g-Whitespace">     </span><span class="mi">47</span>             <span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">48</span>         <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">49</span>             <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<span class="g g-Whitespace">     </span><span class="mi">50</span>                 <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">******</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="g g-Whitespace">     </span><span class="mi">51</span>                 <span class="s2">&quot;Could not load OpenAI model. &quot;</span>

<span class="ne">ValueError</span>: 
<span class="o">******</span>
<span class="n">Could</span> <span class="ow">not</span> <span class="n">load</span> <span class="n">OpenAI</span> <span class="n">model</span><span class="o">.</span> <span class="n">If</span> <span class="n">you</span> <span class="n">intended</span> <span class="n">to</span> <span class="n">use</span> <span class="n">OpenAI</span><span class="p">,</span> <span class="n">please</span> <span class="n">check</span> <span class="n">your</span> <span class="n">OPENAI_API_KEY</span><span class="o">.</span>
<span class="n">Original</span> <span class="n">error</span><span class="p">:</span>
<span class="n">No</span> <span class="n">API</span> <span class="n">key</span> <span class="n">found</span> <span class="k">for</span> <span class="n">OpenAI</span><span class="o">.</span>
<span class="n">Please</span> <span class="nb">set</span> <span class="n">either</span> <span class="n">the</span> <span class="n">OPENAI_API_KEY</span> <span class="n">environment</span> <span class="n">variable</span> <span class="ow">or</span> <span class="n">openai</span><span class="o">.</span><span class="n">api_key</span> <span class="n">prior</span> <span class="n">to</span> <span class="n">initialization</span><span class="o">.</span>
<span class="n">API</span> <span class="n">keys</span> <span class="n">can</span> <span class="n">be</span> <span class="n">found</span> <span class="ow">or</span> <span class="n">created</span> <span class="n">at</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">platform</span><span class="o">.</span><span class="n">openai</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">account</span><span class="o">/</span><span class="n">api</span><span class="o">-</span><span class="n">keys</span>

<span class="n">To</span> <span class="n">disable</span> <span class="n">the</span> <span class="n">LLM</span> <span class="n">entirely</span><span class="p">,</span> <span class="nb">set</span> <span class="n">llm</span><span class="o">=</span><span class="kc">None</span><span class="o">.</span>
<span class="o">******</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="chapter6.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Chapter 6 - Prompt Engineering</p>
      </div>
    </a>
    <a class="right-next"
       href="chapter9.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Chapter 7 - Rag based applications</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Chapter 8 - LLM Agents Development Ecosystem</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ollama">Ollama</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#list-of-available-models">List of available models</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#pull-a-model">Pull a model</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interacting-with-langchain">Interacting with Langchain</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-i-o">Model I/O</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#composition">Composition</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tools">Tools</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#toolkits">Toolkits</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#agents">Agents</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#function-calling">Function Calling</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chroma">Chroma</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#llamaindex">LlamaIndex</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-connector">Data connector</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nodes">Nodes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#natural-language-sql-queries">Natural Language SQL Queries</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Gopi Subramanian
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>